/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function() {
var exports = {};
exports.id = "pages/api/task/submit";
exports.ids = ["pages/api/task/submit"];
exports.modules = {

/***/ "./lib/init_middleware.js":
/*!********************************!*\
  !*** ./lib/init_middleware.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ initMiddleware; }\n/* harmony export */ });\n// Helper method to wait for a middleware to execute before continuing\n// And to throw an error when an error happens in a middleware\nfunction initMiddleware(middleware) {\n  return (req, res) => new Promise((resolve, reject) => {\n    middleware(req, res, result => {\n      if (result instanceof Error) {\n        return reject(result);\n      }\n\n      return resolve(result);\n    });\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vbGliL2luaXRfbWlkZGxld2FyZS5qcz9kMTJiIl0sIm5hbWVzIjpbImluaXRNaWRkbGV3YXJlIiwibWlkZGxld2FyZSIsInJlcSIsInJlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVzdWx0IiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ2UsU0FBU0EsY0FBVCxDQUF3QkMsVUFBeEIsRUFBb0M7QUFDL0MsU0FBTyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FDTCxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQy9CTCxjQUFVLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFZSSxNQUFELElBQVk7QUFDL0IsVUFBSUEsTUFBTSxZQUFZQyxLQUF0QixFQUE2QjtBQUMzQixlQUFPRixNQUFNLENBQUNDLE1BQUQsQ0FBYjtBQUNEOztBQUNELGFBQU9GLE9BQU8sQ0FBQ0UsTUFBRCxDQUFkO0FBQ0QsS0FMUyxDQUFWO0FBTUQsR0FQRCxDQURGO0FBU0QiLCJmaWxlIjoiLi9saWIvaW5pdF9taWRkbGV3YXJlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSGVscGVyIG1ldGhvZCB0byB3YWl0IGZvciBhIG1pZGRsZXdhcmUgdG8gZXhlY3V0ZSBiZWZvcmUgY29udGludWluZ1xuLy8gQW5kIHRvIHRocm93IGFuIGVycm9yIHdoZW4gYW4gZXJyb3IgaGFwcGVucyBpbiBhIG1pZGRsZXdhcmVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRNaWRkbGV3YXJlKG1pZGRsZXdhcmUpIHtcbiAgICByZXR1cm4gKHJlcSwgcmVzKSA9PlxuICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBtaWRkbGV3YXJlKHJlcSwgcmVzLCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdClcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/init_middleware.js\n");

/***/ }),

/***/ "./lib/plugin-compose.js":
/*!*******************************!*\
  !*** ./lib/plugin-compose.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createComposeMiddleware\": function() { return /* binding */ createComposeMiddleware; },\n/* harmony export */   \"loadCachedMiddleware\": function() { return /* binding */ loadCachedMiddleware; }\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst createComposeMiddleware = (cached, composeList) => {\n  if (!Array.isArray(composeList)) {\n    throw TypeError(\"require [compose list] list of middleware id\");\n  }\n\n  return function (context) {\n    let index = -1;\n    return dispatch(0);\n\n    function dispatch(i) {\n      index++;\n      if (i >= composeList.length) return null;\n      const fn = cached[composeList[i]].exports.handler;\n      return fn(context, dispatch.bind(null, i + 1));\n    }\n  };\n}; // plugin loader\n\nconst loadCachedMiddleware = () => {\n  const pluginDir = `./plugins`; // scan plugin dir\n\n  const pluginDirList = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(pluginDir);\n  const middlewares = {};\n\n  for (let folder of pluginDirList) {\n    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(pluginDir, folder); // const stat = fs.statSync(filePath);\n\n    const manifest = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'manifest.json');\n    const mf = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.js');\n\n    try {\n      const meta = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(manifest, 'utf-8'));\n      const content = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(mf);\n      const fn = new Function('n', content);\n      const exports = fn();\n      const component = {\n        index: path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.html')\n      };\n      middlewares[meta.id] = Object.assign({}, meta, {\n        exports\n      }, {\n        component\n      });\n    } catch (loadException) {\n      console.log(`can not load middleware: ${folder}, ${loadException}`);\n    }\n  }\n\n  return middlewares;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vbGliL3BsdWdpbi1jb21wb3NlLmpzPzllMjMiXSwibmFtZXMiOlsiY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUiLCJjYWNoZWQiLCJjb21wb3NlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsIlR5cGVFcnJvciIsImNvbnRleHQiLCJpbmRleCIsImRpc3BhdGNoIiwiaSIsImxlbmd0aCIsImZuIiwiZXhwb3J0cyIsImhhbmRsZXIiLCJiaW5kIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJwbHVnaW5EaXIiLCJwbHVnaW5EaXJMaXN0IiwiZnMiLCJtaWRkbGV3YXJlcyIsImZvbGRlciIsImZpbGVQYXRoIiwicGF0aCIsIm1hbmlmZXN0IiwibWYiLCJtZXRhIiwiSlNPTiIsInBhcnNlIiwiY29udGVudCIsIkZ1bmN0aW9uIiwiY29tcG9uZW50IiwiaWQiLCJPYmplY3QiLCJhc3NpZ24iLCJsb2FkRXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVPLE1BQU1BLHVCQUF1QixHQUFHLENBQUNDLE1BQUQsRUFBU0MsV0FBVCxLQUF5QjtBQUM1RCxNQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTixDQUFjRixXQUFkLENBQUwsRUFBaUM7QUFDN0IsVUFBTUcsU0FBUyxDQUFDLDhDQUFELENBQWY7QUFDSDs7QUFDRCxTQUFPLFVBQVNDLE9BQVQsRUFBa0I7QUFDckIsUUFBSUMsS0FBSyxHQUFHLENBQUMsQ0FBYjtBQUNBLFdBQU9DLFFBQVEsQ0FBQyxDQUFELENBQWY7O0FBQ0EsYUFBU0EsUUFBVCxDQUFrQkMsQ0FBbEIsRUFBcUI7QUFDakJGLFdBQUs7QUFDTCxVQUFJRSxDQUFDLElBQUlQLFdBQVcsQ0FBQ1EsTUFBckIsRUFBNkIsT0FBTyxJQUFQO0FBQzdCLFlBQU1DLEVBQUUsR0FBR1YsTUFBTSxDQUFDQyxXQUFXLENBQUNPLENBQUQsQ0FBWixDQUFOLENBQXVCRyxPQUF2QixDQUErQkMsT0FBMUM7QUFDQSxhQUFPRixFQUFFLENBQUNMLE9BQUQsRUFBVUUsUUFBUSxDQUFDTSxJQUFULENBQWMsSUFBZCxFQUFvQkwsQ0FBQyxHQUFDLENBQXRCLENBQVYsQ0FBVDtBQUNIO0FBQ0osR0FURDtBQVVILENBZE0sQyxDQWdCUDs7QUFDTyxNQUFNTSxvQkFBb0IsR0FBRyxNQUFNO0FBQ3RDLFFBQU1DLFNBQVMsR0FBSSxXQUFuQixDQURzQyxDQUV0Qzs7QUFDQSxRQUFNQyxhQUFhLEdBQUdDLHFEQUFBLENBQWVGLFNBQWYsQ0FBdEI7QUFDQSxRQUFNRyxXQUFXLEdBQUcsRUFBcEI7O0FBQ0EsT0FBSyxJQUFJQyxNQUFULElBQW1CSCxhQUFuQixFQUFrQztBQUM5QixVQUFNSSxRQUFRLEdBQUdDLGdEQUFBLENBQVVOLFNBQVYsRUFBcUJJLE1BQXJCLENBQWpCLENBRDhCLENBRTFCOztBQUNKLFVBQU1HLFFBQVEsR0FBR0QsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixlQUFwQixDQUFqQjtBQUNBLFVBQU1HLEVBQUUsR0FBR0YsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixXQUFwQixDQUFYOztBQUNBLFFBQUc7QUFDQyxZQUFNSSxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXVCxzREFBQSxDQUFnQkssUUFBaEIsRUFBMEIsT0FBMUIsQ0FBWCxDQUFiO0FBQ0EsWUFBTUssT0FBTyxHQUFHVixzREFBQSxDQUFnQk0sRUFBaEIsQ0FBaEI7QUFDQSxZQUFNYixFQUFFLEdBQUcsSUFBSWtCLFFBQUosQ0FBYSxHQUFiLEVBQWtCRCxPQUFsQixDQUFYO0FBQ0EsWUFBTWhCLE9BQU8sR0FBR0QsRUFBRSxFQUFsQjtBQUNBLFlBQU1tQixTQUFTLEdBQUc7QUFDZHZCLGFBQUssRUFBRWUsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixhQUFwQjtBQURPLE9BQWxCO0FBR0FGLGlCQUFXLENBQUNNLElBQUksQ0FBQ00sRUFBTixDQUFYLEdBQXVCQyxNQUFNLENBQUNDLE1BQVAsQ0FBYyxFQUFkLEVBQWtCUixJQUFsQixFQUF3QjtBQUFDYjtBQUFELE9BQXhCLEVBQW1DO0FBQUNrQjtBQUFELE9BQW5DLENBQXZCO0FBRUgsS0FWRCxDQVVFLE9BQU1JLGFBQU4sRUFBcUI7QUFDbkJDLGFBQU8sQ0FBQ0MsR0FBUixDQUFhLDRCQUEyQmhCLE1BQU8sS0FBSWMsYUFBYyxFQUFqRTtBQUNIO0FBQ0o7O0FBQ0QsU0FBT2YsV0FBUDtBQUNILENBekJNIiwiZmlsZSI6Ii4vbGliL3BsdWdpbi1jb21wb3NlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUgPSAoY2FjaGVkLCBjb21wb3NlTGlzdCkgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb21wb3NlTGlzdCkpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicmVxdWlyZSBbY29tcG9zZSBsaXN0XSBsaXN0IG9mIG1pZGRsZXdhcmUgaWRcIik7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2goMCk7XG4gICAgICAgIGZ1bmN0aW9uIGRpc3BhdGNoKGkpIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAoaSA+PSBjb21wb3NlTGlzdC5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBjYWNoZWRbY29tcG9zZUxpc3RbaV1dLmV4cG9ydHMuaGFuZGxlcjtcbiAgICAgICAgICAgIHJldHVybiBmbihjb250ZXh0LCBkaXNwYXRjaC5iaW5kKG51bGwsIGkrMSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBwbHVnaW4gbG9hZGVyXG5leHBvcnQgY29uc3QgbG9hZENhY2hlZE1pZGRsZXdhcmUgPSAoKSA9PiB7XG4gICAgY29uc3QgcGx1Z2luRGlyID0gYC4vcGx1Z2luc2A7XG4gICAgLy8gc2NhbiBwbHVnaW4gZGlyXG4gICAgY29uc3QgcGx1Z2luRGlyTGlzdCA9IGZzLnJlYWRkaXJTeW5jKHBsdWdpbkRpcik7XG4gICAgY29uc3QgbWlkZGxld2FyZXMgPSB7fTtcbiAgICBmb3IgKGxldCBmb2xkZXIgb2YgcGx1Z2luRGlyTGlzdCkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwbHVnaW5EaXIsIGZvbGRlcik7XG4gICAgICAgICAgICAvLyBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuICAgICAgICBjb25zdCBtYW5pZmVzdCA9IHBhdGguam9pbihmaWxlUGF0aCwgJ21hbmlmZXN0Lmpzb24nKTtcbiAgICAgICAgY29uc3QgbWYgPSBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuanMnKTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKG1hbmlmZXN0LCAndXRmLTgnKSlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobWYpO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oJ24nLCBjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydHMgPSBmbigpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuaHRtbCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWlkZGxld2FyZXNbbWV0YS5pZF0gPSBPYmplY3QuYXNzaWduKHt9LCBtZXRhLCB7ZXhwb3J0c30sIHtjb21wb25lbnR9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoKGxvYWRFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBjYW4gbm90IGxvYWQgbWlkZGxld2FyZTogJHtmb2xkZXJ9LCAke2xvYWRFeGNlcHRpb259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pZGRsZXdhcmVzO1xufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/plugin-compose.js\n");

/***/ }),

/***/ "./pages/api/task/submit.js":
/*!**********************************!*\
  !*** ./pages/api/task/submit.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ handler; }\n/* harmony export */ });\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/init_middleware */ \"./lib/init_middleware.js\");\n/* harmony import */ var _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../service/TaskRunner */ \"./service/TaskRunner.js\");\n\n\n\nconst cors = (0,_lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__.default)(cors__WEBPACK_IMPORTED_MODULE_0___default()({\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nasync function handler(req, res) {\n  await cors(req, res);\n  const {\n    nodeTree,\n    buildProfile\n  } = req.body;\n  const taskRunner = new _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__.default(nodeTree, buildProfile);\n  const analysisDiagram = await taskRunner.run();\n  res.status(200).json({\n    data: {\n      diagram: analysisDiagram\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vcGFnZXMvYXBpL3Rhc2svc3VibWl0LmpzPzEyMWMiXSwibmFtZXMiOlsiY29ycyIsImluaXRNaWRkbGV3YXJlIiwiQ29ycyIsIm1ldGhvZHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibm9kZVRyZWUiLCJidWlsZFByb2ZpbGUiLCJib2R5IiwidGFza1J1bm5lciIsIlRhc2tSdW5uZXIiLCJhbmFseXNpc0RpYWdyYW0iLCJydW4iLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsImRpYWdyYW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUEsTUFBTUEsSUFBSSxHQUFHQyw2REFBYyxDQUN6QkMsMkNBQUksQ0FBQztBQUNIQyxTQUFPLEVBQUUsQ0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixTQUFoQjtBQUROLENBQUQsQ0FEcUIsQ0FBM0I7QUFNZSxlQUFlQyxPQUFmLENBQXVCQyxHQUF2QixFQUE0QkMsR0FBNUIsRUFBaUM7QUFDOUMsUUFBTU4sSUFBSSxDQUFDSyxHQUFELEVBQU1DLEdBQU4sQ0FBVjtBQUVBLFFBQU07QUFBQ0MsWUFBRDtBQUFXQztBQUFYLE1BQTJCSCxHQUFHLENBQUNJLElBQXJDO0FBRUEsUUFBTUMsVUFBVSxHQUFHLElBQUlDLHdEQUFKLENBQWVKLFFBQWYsRUFBeUJDLFlBQXpCLENBQW5CO0FBQ0EsUUFBTUksZUFBZSxHQUFHLE1BQU1GLFVBQVUsQ0FBQ0csR0FBWCxFQUE5QjtBQUNBUCxLQUFHLENBQUNRLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFDQyxRQUFJLEVBQUU7QUFBRUMsYUFBTyxFQUFFTDtBQUFYO0FBQVAsR0FBckI7QUFDRCIsImZpbGUiOiIuL3BhZ2VzL2FwaS90YXNrL3N1Ym1pdC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb3JzIGZyb20gJ2NvcnMnXG5pbXBvcnQgaW5pdE1pZGRsZXdhcmUgZnJvbSAnLi4vLi4vLi4vbGliL2luaXRfbWlkZGxld2FyZSdcbmltcG9ydCBUYXNrUnVubmVyIGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvVGFza1J1bm5lcic7XG5cbmNvbnN0IGNvcnMgPSBpbml0TWlkZGxld2FyZShcbiAgQ29ycyh7XG4gICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCcsICdPUFRJT05TJ10sXG4gIH0pXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgYXdhaXQgY29ycyhyZXEsIHJlcylcblxuICBjb25zdCB7bm9kZVRyZWUsIGJ1aWxkUHJvZmlsZX0gPSByZXEuYm9keTtcblxuICBjb25zdCB0YXNrUnVubmVyID0gbmV3IFRhc2tSdW5uZXIobm9kZVRyZWUsIGJ1aWxkUHJvZmlsZSk7XG4gIGNvbnN0IGFuYWx5c2lzRGlhZ3JhbSA9IGF3YWl0IHRhc2tSdW5uZXIucnVuKCk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtkYXRhOiB7IGRpYWdyYW06IGFuYWx5c2lzRGlhZ3JhbSB9fSlcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/api/task/submit.js\n");

/***/ }),

/***/ "./service/FlowMixer.js":
/*!******************************!*\
  !*** ./service/FlowMixer.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Promise = __webpack_require__(/*! es6-promise */ \"es6-promise\").Promise;\n\nclass FlowMixer {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n  }\n\n  async mergedMultiFlow(flowList) {\n    const flowValueList = await Promise.all(flowList); // assume text line format\n\n    const concatedFile = flowValueList.reduce((a, c) => a.concat(c), \"\");\n    return concatedFile;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FlowMixer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9GbG93TWl4ZXIuanM/NzFiZiJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsIkZsb3dNaXhlciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwibWVyZ2VkTXVsdGlGbG93IiwiZmxvd0xpc3QiLCJmbG93VmFsdWVMaXN0IiwiYWxsIiwiY29uY2F0ZWRGaWxlIiwicmVkdWNlIiwiYSIsImMiLCJjb25jYXQiXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFJQSxPQUFPLEdBQUdDLDZEQUFkOztBQUVBLE1BQU1DLFNBQU4sQ0FBZ0I7QUFDWkMsYUFBVyxDQUFDQyxTQUFELEVBQVlDLGFBQVosRUFBMkI7QUFDbEMsU0FBS0MsUUFBTCxHQUFnQkYsU0FBaEI7QUFDQSxTQUFLRyxZQUFMLEdBQW9CRixhQUFwQjtBQUNIOztBQUNELFFBQU1HLGVBQU4sQ0FBc0JDLFFBQXRCLEVBQWdDO0FBQzVCLFVBQU1DLGFBQWEsR0FBRyxNQUFNVixPQUFPLENBQUNXLEdBQVIsQ0FBWUYsUUFBWixDQUE1QixDQUQ0QixDQUU1Qjs7QUFDQSxVQUFNRyxZQUFZLEdBQUdGLGFBQWEsQ0FBQ0csTUFBZCxDQUFxQixDQUFDQyxDQUFELEVBQUlDLENBQUosS0FBVUQsQ0FBQyxDQUFDRSxNQUFGLENBQVNELENBQVQsQ0FBL0IsRUFBNEMsRUFBNUMsQ0FBckI7QUFDQSxXQUFPSCxZQUFQO0FBQ0g7O0FBVlc7O0FBYWhCLCtEQUFlVixTQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9GbG93TWl4ZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuY2xhc3MgRmxvd01peGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihfbm9kZVRyZWUsIF9idWlsZFByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5ub2RlVHJlZSA9IF9ub2RlVHJlZTtcbiAgICAgICAgdGhpcy5idWlsZFByb2ZpbGUgPSBfYnVpbGRQcm9maWxlO1xuICAgIH1cbiAgICBhc3luYyBtZXJnZWRNdWx0aUZsb3coZmxvd0xpc3QpIHtcbiAgICAgICAgY29uc3QgZmxvd1ZhbHVlTGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKGZsb3dMaXN0KTtcbiAgICAgICAgLy8gYXNzdW1lIHRleHQgbGluZSBmb3JtYXRcbiAgICAgICAgY29uc3QgY29uY2F0ZWRGaWxlID0gZmxvd1ZhbHVlTGlzdC5yZWR1Y2UoKGEsIGMpID0+IGEuY29uY2F0KGMpLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGNvbmNhdGVkRmlsZTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZsb3dNaXhlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./service/FlowMixer.js\n");

/***/ }),

/***/ "./service/PipelineWorker.js":
/*!***********************************!*\
  !*** ./service/PipelineWorker.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! readline */ \"readline\");\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(readline__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/plugin-compose */ \"./lib/plugin-compose.js\");\n\n\n\n\nclass PipelineWorker {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile; // create compose plugin handler chain\n\n    const cachedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.loadCachedMiddleware)();\n    const composedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.createComposeMiddleware)(cachedMiddleware, [\"acabula-middleware-line-text-formatter\", // \"acabula-middleware-chunkify\", \n    // \"acabula-middleware-genelizer\", \n    \"acabula-middleware-syntax-highlight\"]);\n    this.composedPlugin = composedMiddleware;\n  }\n\n  async applyPluginPipeline(resource, checkedPlugin) {\n    // checkedPlugin shoud be a list of object with user option parameters\n    const ordinaryPluginList = checkedPlugin.sort();\n    const dataFrame = await async function (fn) {\n      // const df = new dfd.DataFrame([[\"a\", \"a\", \"a\", \"a\", \"a\"]], { columns: [\"DateTime\", \"Level\", \"ThreadId\", \"ProcessName\", \"Message\"] });\n      const context = {\n        data: null,\n        dataFrame: []\n      };\n      const statistics = {\n        line: 0\n      };\n\n      try {\n        const rl = (0,readline__WEBPACK_IMPORTED_MODULE_1__.createInterface)({\n          input: resource,\n          crlfDelay: Infinity\n        });\n        rl.on('line', line => {\n          // apply middleware for every line, and create \n          context.data = line;\n          statistics.line++;\n          fn(context); // df.append(context.data);\n        });\n        await (0,events__WEBPACK_IMPORTED_MODULE_0__.once)(rl, 'close');\n        console.log(`line process finished, origin line: ${statistics.line}, record log line: ${context.dataFrame.length}`);\n      } catch (err) {\n        console.error(err);\n      }\n\n      return context.dataFrame;\n    }(this.composedPlugin); // bulk process\n\n    const SEGMENT_DELIMITER = \"TMSM main service OnStart\";\n    const shards = [];\n    let section_start_index = 0;\n    let section_end_index = null;\n\n    for (let [index, record] of dataFrame.entries()) {\n      const message = record[4];\n\n      if (message.search(SEGMENT_DELIMITER) > -1) {\n        if (index == 0) {\n          section_start_index = 0;\n          continue;\n        }\n\n        section_end_index = index - 1;\n        shards.push([section_start_index, section_end_index]);\n        section_start_index = index;\n      }\n    }\n\n    section_end_index = dataFrame.length - 1;\n    shards.push([section_start_index, section_end_index]);\n    const result = [];\n\n    const useStatistics = recordList => {\n      // groupby and count\n      const levelStat = recordList.reduce((m, e) => {\n        m[e[1]] = (m[e[1]] || 0) + 1;\n        return m;\n      }, {}); // padding data type.\n\n      return Object.assign({\n        ERROR: 0,\n        INFO: 0,\n        DEBUG: 0,\n        WARN: 0\n      }, levelStat);\n    }; // create thread block\n\n\n    for (let [start, end] of shards) {\n      const thread_map = new Map();\n\n      for (let i = start; i <= end; i++) {\n        const record_tid = dataFrame[i][2];\n\n        if (!thread_map[record_tid]) {\n          thread_map[record_tid] = [];\n        }\n\n        thread_map[record_tid].push(dataFrame[i]);\n      }\n\n      const serverStartBlock = {};\n      serverStartBlock.segmentName = dataFrame[start][0];\n      serverStartBlock.group = [];\n\n      for (let threadId in thread_map) {\n        const threadBlock = {};\n        threadBlock.blockName = threadId;\n        threadBlock.indicators = useStatistics(thread_map[threadId]); // other\n\n        threadBlock.scheduler = false;\n        threadBlock.timeSpan = {\n          start: thread_map[threadId][0][0],\n          end: thread_map[threadId][thread_map[threadId].length - 1][0]\n        };\n        threadBlock.previewContent = thread_map[threadId].slice(0, 5).map(record => record[4]);\n        serverStartBlock.group.push(threadBlock);\n      }\n\n      result.push(serverStartBlock); // clear map because the tid will reused in difference server onstart\n\n      thread_map.clear();\n    }\n\n    return result;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PipelineWorker);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9QaXBlbGluZVdvcmtlci5qcz9lNDAwIl0sIm5hbWVzIjpbIlBpcGVsaW5lV29ya2VyIiwiY29uc3RydWN0b3IiLCJfbm9kZVRyZWUiLCJfYnVpbGRQcm9maWxlIiwibm9kZVRyZWUiLCJidWlsZFByb2ZpbGUiLCJjYWNoZWRNaWRkbGV3YXJlIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJjb21wb3NlZE1pZGRsZXdhcmUiLCJjcmVhdGVDb21wb3NlTWlkZGxld2FyZSIsImNvbXBvc2VkUGx1Z2luIiwiYXBwbHlQbHVnaW5QaXBlbGluZSIsInJlc291cmNlIiwiY2hlY2tlZFBsdWdpbiIsIm9yZGluYXJ5UGx1Z2luTGlzdCIsInNvcnQiLCJkYXRhRnJhbWUiLCJmbiIsImNvbnRleHQiLCJkYXRhIiwic3RhdGlzdGljcyIsImxpbmUiLCJybCIsImNyZWF0ZUludGVyZmFjZSIsImlucHV0IiwiY3JsZkRlbGF5IiwiSW5maW5pdHkiLCJvbiIsIm9uY2UiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiZXJyIiwiZXJyb3IiLCJTRUdNRU5UX0RFTElNSVRFUiIsInNoYXJkcyIsInNlY3Rpb25fc3RhcnRfaW5kZXgiLCJzZWN0aW9uX2VuZF9pbmRleCIsImluZGV4IiwicmVjb3JkIiwiZW50cmllcyIsIm1lc3NhZ2UiLCJzZWFyY2giLCJwdXNoIiwicmVzdWx0IiwidXNlU3RhdGlzdGljcyIsInJlY29yZExpc3QiLCJsZXZlbFN0YXQiLCJyZWR1Y2UiLCJtIiwiZSIsIk9iamVjdCIsImFzc2lnbiIsIkVSUk9SIiwiSU5GTyIsIkRFQlVHIiwiV0FSTiIsInN0YXJ0IiwiZW5kIiwidGhyZWFkX21hcCIsIk1hcCIsImkiLCJyZWNvcmRfdGlkIiwic2VydmVyU3RhcnRCbG9jayIsInNlZ21lbnROYW1lIiwiZ3JvdXAiLCJ0aHJlYWRJZCIsInRocmVhZEJsb2NrIiwiYmxvY2tOYW1lIiwiaW5kaWNhdG9ycyIsInNjaGVkdWxlciIsInRpbWVTcGFuIiwicHJldmlld0NvbnRlbnQiLCJzbGljZSIsIm1hcCIsImNsZWFyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBR0EsTUFBTUEsY0FBTixDQUFxQjtBQUNqQkMsYUFBVyxDQUFDQyxTQUFELEVBQVlDLGFBQVosRUFBMkI7QUFDbEMsU0FBS0MsUUFBTCxHQUFnQkYsU0FBaEI7QUFDQSxTQUFLRyxZQUFMLEdBQW9CRixhQUFwQixDQUZrQyxDQUdsQzs7QUFDQSxVQUFNRyxnQkFBZ0IsR0FBR0MseUVBQW9CLEVBQTdDO0FBQ0EsVUFBTUMsa0JBQWtCLEdBQUdDLDRFQUF1QixDQUM5Q0gsZ0JBRDhDLEVBRTlDLENBQUMsd0NBQUQsRUFDQTtBQUNBO0FBQ0EseUNBSEEsQ0FGOEMsQ0FBbEQ7QUFNQSxTQUFLSSxjQUFMLEdBQXNCRixrQkFBdEI7QUFDSDs7QUFFRCxRQUFNRyxtQkFBTixDQUEwQkMsUUFBMUIsRUFBb0NDLGFBQXBDLEVBQW1EO0FBQy9DO0FBQ0EsVUFBTUMsa0JBQWtCLEdBQUdELGFBQWEsQ0FBQ0UsSUFBZCxFQUEzQjtBQUVBLFVBQU1DLFNBQVMsR0FBRyxNQUFPLGdCQUFlQyxFQUFmLEVBQW1CO0FBQ3hDO0FBQ0EsWUFBTUMsT0FBTyxHQUFHO0FBQ1pDLFlBQUksRUFBRSxJQURNO0FBRVpILGlCQUFTLEVBQUU7QUFGQyxPQUFoQjtBQUlBLFlBQU1JLFVBQVUsR0FBRztBQUNmQyxZQUFJLEVBQUU7QUFEUyxPQUFuQjs7QUFHQSxVQUFJO0FBQ0EsY0FBTUMsRUFBRSxHQUFHQyx5REFBZSxDQUFDO0FBQ3ZCQyxlQUFLLEVBQUVaLFFBRGdCO0FBRXZCYSxtQkFBUyxFQUFFQztBQUZZLFNBQUQsQ0FBMUI7QUFLQUosVUFBRSxDQUFDSyxFQUFILENBQU0sTUFBTixFQUFlTixJQUFELElBQVU7QUFDcEI7QUFDQUgsaUJBQU8sQ0FBQ0MsSUFBUixHQUFlRSxJQUFmO0FBQ0FELG9CQUFVLENBQUNDLElBQVg7QUFDQUosWUFBRSxDQUFDQyxPQUFELENBQUYsQ0FKb0IsQ0FLcEI7QUFDSCxTQU5EO0FBUUEsY0FBTVUsNENBQUksQ0FBQ04sRUFBRCxFQUFLLE9BQUwsQ0FBVjtBQUVBTyxlQUFPLENBQUNDLEdBQVIsQ0FBYSx1Q0FBc0NWLFVBQVUsQ0FBQ0MsSUFBSyxzQkFBcUJILE9BQU8sQ0FBQ0YsU0FBUixDQUFrQmUsTUFBTyxFQUFqSDtBQUNILE9BakJELENBaUJFLE9BQU9DLEdBQVAsRUFBWTtBQUNWSCxlQUFPLENBQUNJLEtBQVIsQ0FBY0QsR0FBZDtBQUNIOztBQUNELGFBQU9kLE9BQU8sQ0FBQ0YsU0FBZjtBQUNILEtBOUJ1QixDQThCckIsS0FBS04sY0E5QmdCLENBQXhCLENBSitDLENBb0MvQzs7QUFDQSxVQUFNd0IsaUJBQWlCLEdBQUcsMkJBQTFCO0FBQ0EsVUFBTUMsTUFBTSxHQUFHLEVBQWY7QUFDQSxRQUFJQyxtQkFBbUIsR0FBRyxDQUExQjtBQUNBLFFBQUlDLGlCQUFpQixHQUFHLElBQXhCOztBQUNBLFNBQUssSUFBSSxDQUFDQyxLQUFELEVBQVFDLE1BQVIsQ0FBVCxJQUE0QnZCLFNBQVMsQ0FBQ3dCLE9BQVYsRUFBNUIsRUFBaUQ7QUFDN0MsWUFBTUMsT0FBTyxHQUFHRixNQUFNLENBQUMsQ0FBRCxDQUF0Qjs7QUFDQSxVQUFJRSxPQUFPLENBQUNDLE1BQVIsQ0FBZVIsaUJBQWYsSUFBb0MsQ0FBQyxDQUF6QyxFQUE0QztBQUN4QyxZQUFJSSxLQUFLLElBQUksQ0FBYixFQUFnQjtBQUNaRiw2QkFBbUIsR0FBRyxDQUF0QjtBQUNBO0FBQ0g7O0FBQ0RDLHlCQUFpQixHQUFHQyxLQUFLLEdBQUcsQ0FBNUI7QUFFQUgsY0FBTSxDQUFDUSxJQUFQLENBQVksQ0FBQ1AsbUJBQUQsRUFBc0JDLGlCQUF0QixDQUFaO0FBRUFELDJCQUFtQixHQUFHRSxLQUF0QjtBQUNIO0FBQ0o7O0FBQ0RELHFCQUFpQixHQUFHckIsU0FBUyxDQUFDZSxNQUFWLEdBQW1CLENBQXZDO0FBQ0FJLFVBQU0sQ0FBQ1EsSUFBUCxDQUFZLENBQUNQLG1CQUFELEVBQXNCQyxpQkFBdEIsQ0FBWjtBQUdBLFVBQU1PLE1BQU0sR0FBRyxFQUFmOztBQUNBLFVBQU1DLGFBQWEsR0FBSUMsVUFBRCxJQUFnQjtBQUNsQztBQUNBLFlBQU1DLFNBQVMsR0FBR0QsVUFBVSxDQUFDRSxNQUFYLENBQWtCLENBQUNDLENBQUQsRUFBSUMsQ0FBSixLQUFVO0FBQzFDRCxTQUFDLENBQUNDLENBQUMsQ0FBQyxDQUFELENBQUYsQ0FBRCxHQUFVLENBQUNELENBQUMsQ0FBQ0MsQ0FBQyxDQUFDLENBQUQsQ0FBRixDQUFELElBQVMsQ0FBVixJQUFlLENBQXpCO0FBQ0EsZUFBT0QsQ0FBUDtBQUNILE9BSGlCLEVBR2YsRUFIZSxDQUFsQixDQUZrQyxDQU1sQzs7QUFDQSxhQUFPRSxNQUFNLENBQUNDLE1BQVAsQ0FDSDtBQUNJQyxhQUFLLEVBQUUsQ0FEWDtBQUVJQyxZQUFJLEVBQUUsQ0FGVjtBQUdJQyxhQUFLLEVBQUUsQ0FIWDtBQUlJQyxZQUFJLEVBQUU7QUFKVixPQURHLEVBTUFULFNBTkEsQ0FBUDtBQU9ILEtBZEQsQ0E1RCtDLENBMkUvQzs7O0FBQ0EsU0FBSyxJQUFJLENBQUNVLEtBQUQsRUFBUUMsR0FBUixDQUFULElBQXlCdkIsTUFBekIsRUFBaUM7QUFDN0IsWUFBTXdCLFVBQVUsR0FBRyxJQUFJQyxHQUFKLEVBQW5COztBQUNBLFdBQUssSUFBSUMsQ0FBQyxHQUFHSixLQUFiLEVBQW9CSSxDQUFDLElBQUlILEdBQXpCLEVBQThCRyxDQUFDLEVBQS9CLEVBQW1DO0FBQy9CLGNBQU1DLFVBQVUsR0FBRzlDLFNBQVMsQ0FBQzZDLENBQUQsQ0FBVCxDQUFhLENBQWIsQ0FBbkI7O0FBQ0EsWUFBSSxDQUFFRixVQUFVLENBQUNHLFVBQUQsQ0FBaEIsRUFBOEI7QUFDMUJILG9CQUFVLENBQUNHLFVBQUQsQ0FBVixHQUF5QixFQUF6QjtBQUNIOztBQUNESCxrQkFBVSxDQUFDRyxVQUFELENBQVYsQ0FBdUJuQixJQUF2QixDQUE0QjNCLFNBQVMsQ0FBQzZDLENBQUQsQ0FBckM7QUFDSDs7QUFDRCxZQUFNRSxnQkFBZ0IsR0FBRyxFQUF6QjtBQUNBQSxzQkFBZ0IsQ0FBQ0MsV0FBakIsR0FBK0JoRCxTQUFTLENBQUN5QyxLQUFELENBQVQsQ0FBaUIsQ0FBakIsQ0FBL0I7QUFDQU0sc0JBQWdCLENBQUNFLEtBQWpCLEdBQXlCLEVBQXpCOztBQUNBLFdBQUssSUFBSUMsUUFBVCxJQUFxQlAsVUFBckIsRUFBaUM7QUFDN0IsY0FBTVEsV0FBVyxHQUFHLEVBQXBCO0FBQ0FBLG1CQUFXLENBQUNDLFNBQVosR0FBd0JGLFFBQXhCO0FBQ0FDLG1CQUFXLENBQUNFLFVBQVosR0FBeUJ4QixhQUFhLENBQUNjLFVBQVUsQ0FBQ08sUUFBRCxDQUFYLENBQXRDLENBSDZCLENBSTdCOztBQUNBQyxtQkFBVyxDQUFDRyxTQUFaLEdBQXdCLEtBQXhCO0FBQ0FILG1CQUFXLENBQUNJLFFBQVosR0FBdUI7QUFDbkJkLGVBQUssRUFBRUUsVUFBVSxDQUFDTyxRQUFELENBQVYsQ0FBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsQ0FEWTtBQUVuQlIsYUFBRyxFQUFFQyxVQUFVLENBQUNPLFFBQUQsQ0FBVixDQUFzQlAsVUFBVSxDQUFDTyxRQUFELENBQVYsQ0FBcUJuQyxNQUFyQixHQUE4QixDQUFwRCxFQUF3RCxDQUF4RDtBQUZjLFNBQXZCO0FBSUFvQyxtQkFBVyxDQUFDSyxjQUFaLEdBQTZCYixVQUFVLENBQUNPLFFBQUQsQ0FBVixDQUFxQk8sS0FBckIsQ0FBMkIsQ0FBM0IsRUFBOEIsQ0FBOUIsRUFBaUNDLEdBQWpDLENBQXFDbkMsTUFBTSxJQUFJQSxNQUFNLENBQUMsQ0FBRCxDQUFyRCxDQUE3QjtBQUNBd0Isd0JBQWdCLENBQUNFLEtBQWpCLENBQXVCdEIsSUFBdkIsQ0FBNEJ3QixXQUE1QjtBQUNIOztBQUNEdkIsWUFBTSxDQUFDRCxJQUFQLENBQVlvQixnQkFBWixFQXpCNkIsQ0EwQjdCOztBQUNBSixnQkFBVSxDQUFDZ0IsS0FBWDtBQUNIOztBQUVELFdBQU8vQixNQUFQO0FBQ0g7O0FBMUhnQjs7QUE2SHJCLCtEQUFlNUMsY0FBZiIsImZpbGUiOiIuL3NlcnZpY2UvUGlwZWxpbmVXb3JrZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvbmNlIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IGNyZWF0ZUludGVyZmFjZSB9IGZyb20gJ3JlYWRsaW5lJztcbmltcG9ydCB7IGxvYWRDYWNoZWRNaWRkbGV3YXJlLCBjcmVhdGVDb21wb3NlTWlkZGxld2FyZSwgIH0gZnJvbSAnLi4vbGliL3BsdWdpbi1jb21wb3NlJztcblxuXG5jbGFzcyBQaXBlbGluZVdvcmtlciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICAgICAgLy8gY3JlYXRlIGNvbXBvc2UgcGx1Z2luIGhhbmRsZXIgY2hhaW5cbiAgICAgICAgY29uc3QgY2FjaGVkTWlkZGxld2FyZSA9IGxvYWRDYWNoZWRNaWRkbGV3YXJlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBvc2VkTWlkZGxld2FyZSA9IGNyZWF0ZUNvbXBvc2VNaWRkbGV3YXJlKFxuICAgICAgICAgICAgY2FjaGVkTWlkZGxld2FyZSwgXG4gICAgICAgICAgICBbXCJhY2FidWxhLW1pZGRsZXdhcmUtbGluZS10ZXh0LWZvcm1hdHRlclwiLFxuICAgICAgICAgICAgLy8gXCJhY2FidWxhLW1pZGRsZXdhcmUtY2h1bmtpZnlcIiwgXG4gICAgICAgICAgICAvLyBcImFjYWJ1bGEtbWlkZGxld2FyZS1nZW5lbGl6ZXJcIiwgXG4gICAgICAgICAgICBcImFjYWJ1bGEtbWlkZGxld2FyZS1zeW50YXgtaGlnaGxpZ2h0XCJdKTtcbiAgICAgICAgdGhpcy5jb21wb3NlZFBsdWdpbiA9IGNvbXBvc2VkTWlkZGxld2FyZTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgYXBwbHlQbHVnaW5QaXBlbGluZShyZXNvdXJjZSwgY2hlY2tlZFBsdWdpbikge1xuICAgICAgICAvLyBjaGVja2VkUGx1Z2luIHNob3VkIGJlIGEgbGlzdCBvZiBvYmplY3Qgd2l0aCB1c2VyIG9wdGlvbiBwYXJhbWV0ZXJzXG4gICAgICAgIGNvbnN0IG9yZGluYXJ5UGx1Z2luTGlzdCA9IGNoZWNrZWRQbHVnaW4uc29ydCgpO1xuXG4gICAgICAgIGNvbnN0IGRhdGFGcmFtZSA9IGF3YWl0IChhc3luYyBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgLy8gY29uc3QgZGYgPSBuZXcgZGZkLkRhdGFGcmFtZShbW1wiYVwiLCBcImFcIiwgXCJhXCIsIFwiYVwiLCBcImFcIl1dLCB7IGNvbHVtbnM6IFtcIkRhdGVUaW1lXCIsIFwiTGV2ZWxcIiwgXCJUaHJlYWRJZFwiLCBcIlByb2Nlc3NOYW1lXCIsIFwiTWVzc2FnZVwiXSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogbnVsbCwgXG4gICAgICAgICAgICAgICAgZGF0YUZyYW1lOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRpc3RpY3MgPSB7XG4gICAgICAgICAgICAgICAgbGluZTogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJsID0gY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjcmxmRGVsYXk6IEluZmluaXR5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmwub24oJ2xpbmUnLCAobGluZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBhcHBseSBtaWRkbGV3YXJlIGZvciBldmVyeSBsaW5lLCBhbmQgY3JlYXRlIFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRhdGEgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmxpbmUgKys7XG4gICAgICAgICAgICAgICAgICAgIGZuKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZi5hcHBlbmQoY29udGV4dC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCBvbmNlKHJsLCAnY2xvc2UnKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSBwcm9jZXNzIGZpbmlzaGVkLCBvcmlnaW4gbGluZTogJHtzdGF0aXN0aWNzLmxpbmV9LCByZWNvcmQgbG9nIGxpbmU6ICR7Y29udGV4dC5kYXRhRnJhbWUubGVuZ3RofWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGF0YUZyYW1lO1xuICAgICAgICB9KSh0aGlzLmNvbXBvc2VkUGx1Z2luKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGJ1bGsgcHJvY2Vzc1xuICAgICAgICBjb25zdCBTRUdNRU5UX0RFTElNSVRFUiA9IFwiVE1TTSBtYWluIHNlcnZpY2UgT25TdGFydFwiO1xuICAgICAgICBjb25zdCBzaGFyZHMgPSBbXTtcbiAgICAgICAgbGV0IHNlY3Rpb25fc3RhcnRfaW5kZXggPSAwO1xuICAgICAgICBsZXQgc2VjdGlvbl9lbmRfaW5kZXggPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBbaW5kZXgsIHJlY29yZF0gb2YgZGF0YUZyYW1lLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlY29yZFs0XTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlYXJjaChTRUdNRU5UX0RFTElNSVRFUikgPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25fc3RhcnRfaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VjdGlvbl9lbmRfaW5kZXggPSBpbmRleCAtIDE7XG5cbiAgICAgICAgICAgICAgICBzaGFyZHMucHVzaChbc2VjdGlvbl9zdGFydF9pbmRleCwgc2VjdGlvbl9lbmRfaW5kZXhdKTtcblxuICAgICAgICAgICAgICAgIHNlY3Rpb25fc3RhcnRfaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWN0aW9uX2VuZF9pbmRleCA9IGRhdGFGcmFtZS5sZW5ndGggLSAxO1xuICAgICAgICBzaGFyZHMucHVzaChbc2VjdGlvbl9zdGFydF9pbmRleCwgc2VjdGlvbl9lbmRfaW5kZXhdKTtcblxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCB1c2VTdGF0aXN0aWNzID0gKHJlY29yZExpc3QpID0+IHtcbiAgICAgICAgICAgIC8vIGdyb3VwYnkgYW5kIGNvdW50XG4gICAgICAgICAgICBjb25zdCBsZXZlbFN0YXQgPSByZWNvcmRMaXN0LnJlZHVjZSgobSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIG1bZVsxXV0gPSAobVtlWzFdXXx8MCkgKyAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgLy8gcGFkZGluZyBkYXRhIHR5cGUuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEVSUk9SOiAwLCBcbiAgICAgICAgICAgICAgICAgICAgSU5GTzogMCwgXG4gICAgICAgICAgICAgICAgICAgIERFQlVHOiAwLCBcbiAgICAgICAgICAgICAgICAgICAgV0FSTjogMCxcbiAgICAgICAgICAgICAgICB9LCBsZXZlbFN0YXQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBjcmVhdGUgdGhyZWFkIGJsb2NrXG4gICAgICAgIGZvciAobGV0IFtzdGFydCwgZW5kXSBvZiBzaGFyZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRocmVhZF9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRfdGlkID0gZGF0YUZyYW1lW2ldWzJdO1xuICAgICAgICAgICAgICAgIGlmICghIHRocmVhZF9tYXBbcmVjb3JkX3RpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyZWFkX21hcFtyZWNvcmRfdGlkXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJlYWRfbWFwW3JlY29yZF90aWRdLnB1c2goZGF0YUZyYW1lW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlcnZlclN0YXJ0QmxvY2sgPSB7fTtcbiAgICAgICAgICAgIHNlcnZlclN0YXJ0QmxvY2suc2VnbWVudE5hbWUgPSBkYXRhRnJhbWVbc3RhcnRdWzBdO1xuICAgICAgICAgICAgc2VydmVyU3RhcnRCbG9jay5ncm91cCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdGhyZWFkSWQgaW4gdGhyZWFkX21hcCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRocmVhZEJsb2NrID0ge307XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suYmxvY2tOYW1lID0gdGhyZWFkSWQ7XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suaW5kaWNhdG9ycyA9IHVzZVN0YXRpc3RpY3ModGhyZWFkX21hcFt0aHJlYWRJZF0pO1xuICAgICAgICAgICAgICAgIC8vIG90aGVyXG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suc2NoZWR1bGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2sudGltZVNwYW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aHJlYWRfbWFwW3RocmVhZElkXVswXVswXSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB0aHJlYWRfbWFwW3RocmVhZElkXVsgdGhyZWFkX21hcFt0aHJlYWRJZF0ubGVuZ3RoIC0gMSBdWzBdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2sucHJldmlld0NvbnRlbnQgPSB0aHJlYWRfbWFwW3RocmVhZElkXS5zbGljZSgwLCA1KS5tYXAocmVjb3JkID0+IHJlY29yZFs0XSk7XG4gICAgICAgICAgICAgICAgc2VydmVyU3RhcnRCbG9jay5ncm91cC5wdXNoKHRocmVhZEJsb2NrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlclN0YXJ0QmxvY2spO1xuICAgICAgICAgICAgLy8gY2xlYXIgbWFwIGJlY2F1c2UgdGhlIHRpZCB3aWxsIHJldXNlZCBpbiBkaWZmZXJlbmNlIHNlcnZlciBvbnN0YXJ0XG4gICAgICAgICAgICB0aHJlYWRfbWFwLmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGlwZWxpbmVXb3JrZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./service/PipelineWorker.js\n");

/***/ }),

/***/ "./service/ResourceManager.js":
/*!************************************!*\
  !*** ./service/ResourceManager.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst {\n  readFile,\n  createReadStream\n} = __webpack_require__(/*! fs */ \"fs\");\n\nvar Promise = __webpack_require__(/*! es6-promise */ \"es6-promise\").Promise;\n\nclass ResourceManager {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n  }\n\n  async getResource(resourceName) {\n    // use sync read\n    const fileContent = await new Promise(function (resolve, reject) {\n      readFile(`./upload/${resourceName}`, 'utf8', result => {\n        resolve(result);\n      });\n    });\n    return fileContent;\n  }\n\n  async getReadStream(resourceName) {\n    const fileName = `./upload/${resourceName}`;\n    const fileStream = createReadStream(fileName);\n    return fileStream;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ResourceManager);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9SZXNvdXJjZU1hbmFnZXIuanM/YzM0YiJdLCJuYW1lcyI6WyJyZWFkRmlsZSIsImNyZWF0ZVJlYWRTdHJlYW0iLCJyZXF1aXJlIiwiUHJvbWlzZSIsIlJlc291cmNlTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwiZ2V0UmVzb3VyY2UiLCJyZXNvdXJjZU5hbWUiLCJmaWxlQ29udGVudCIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJnZXRSZWFkU3RyZWFtIiwiZmlsZU5hbWUiLCJmaWxlU3RyZWFtIl0sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTTtBQUFFQSxVQUFGO0FBQVlDO0FBQVosSUFBaUNDLG1CQUFPLENBQUMsY0FBRCxDQUE5Qzs7QUFDQSxJQUFJQyxPQUFPLEdBQUdELDZEQUFkOztBQUVBLE1BQU1FLGVBQU4sQ0FBc0I7QUFDbEJDLGFBQVcsQ0FBQ0MsU0FBRCxFQUFZQyxhQUFaLEVBQTJCO0FBQ2xDLFNBQUtDLFFBQUwsR0FBZ0JGLFNBQWhCO0FBQ0EsU0FBS0csWUFBTCxHQUFvQkYsYUFBcEI7QUFDSDs7QUFDRCxRQUFNRyxXQUFOLENBQWtCQyxZQUFsQixFQUFnQztBQUM1QjtBQUNBLFVBQU1DLFdBQVcsR0FBRyxNQUFNLElBQUlULE9BQUosQ0FDMUIsVUFBU1UsT0FBVCxFQUFrQkMsTUFBbEIsRUFBMEI7QUFDdEJkLGNBQVEsQ0FBRSxZQUFXVyxZQUFhLEVBQTFCLEVBQTZCLE1BQTdCLEVBQXNDSSxNQUFELElBQVU7QUFDbkRGLGVBQU8sQ0FBQ0UsTUFBRCxDQUFQO0FBQ0gsT0FGTyxDQUFSO0FBR0gsS0FMeUIsQ0FBMUI7QUFNQSxXQUFPSCxXQUFQO0FBQ0g7O0FBQ0QsUUFBTUksYUFBTixDQUFvQkwsWUFBcEIsRUFBa0M7QUFDOUIsVUFBTU0sUUFBUSxHQUFJLFlBQVdOLFlBQWEsRUFBMUM7QUFDQSxVQUFNTyxVQUFVLEdBQUdqQixnQkFBZ0IsQ0FBQ2dCLFFBQUQsQ0FBbkM7QUFDQSxXQUFPQyxVQUFQO0FBQ0g7O0FBbkJpQjs7QUFzQnRCLCtEQUFlZCxlQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9SZXNvdXJjZU1hbmFnZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJlYWRGaWxlLCBjcmVhdGVSZWFkU3RyZWFtIH0gPSByZXF1aXJlKCdmcycpO1xudmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG5cbmNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVzb3VyY2UocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgIC8vIHVzZSBzeW5jIHJlYWRcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBuZXcgUHJvbWlzZShcbiAgICAgICAgZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICByZWFkRmlsZShgLi91cGxvYWQvJHtyZXNvdXJjZU5hbWV9YCwgJ3V0ZjgnLCAocmVzdWx0KT0+e1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmlsZUNvbnRlbnQ7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlYWRTdHJlYW0ocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYC4vdXBsb2FkLyR7cmVzb3VyY2VOYW1lfWA7XG4gICAgICAgIGNvbnN0IGZpbGVTdHJlYW0gPSBjcmVhdGVSZWFkU3RyZWFtKGZpbGVOYW1lKTtcbiAgICAgICAgcmV0dXJuIGZpbGVTdHJlYW07XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXNvdXJjZU1hbmFnZXI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./service/ResourceManager.js\n");

/***/ }),

/***/ "./service/TaskRunner.js":
/*!*******************************!*\
  !*** ./service/TaskRunner.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FlowMixer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FlowMixer */ \"./service/FlowMixer.js\");\n/* harmony import */ var _PipelineWorker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PipelineWorker */ \"./service/PipelineWorker.js\");\n/* harmony import */ var _ResourceManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ResourceManager */ \"./service/ResourceManager.js\");\n\n\n\n\nclass TaskRunner {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n    this.flowMixer = new _FlowMixer__WEBPACK_IMPORTED_MODULE_0__.default(_nodeTree, _buildProfile);\n    this.pipelineWorker = new _PipelineWorker__WEBPACK_IMPORTED_MODULE_1__.default(_nodeTree, _buildProfile);\n    this.resourceManager = new _ResourceManager__WEBPACK_IMPORTED_MODULE_2__.default(_nodeTree, _buildProfile);\n  }\n\n  async createResourceFlow(nodeInfo) {\n    const {\n      id,\n      labelText,\n      resourceName,\n      nodeType,\n      nodeDetailType,\n      checkedPlugin,\n      children\n    } = nodeInfo; // check if this is a mix node\n\n    if (children && children.length > 0) {\n      // concat every node info\n      const subGroup = [];\n\n      for (let subNode of children) {\n        subGroup.push(await this.createResourceFlow(subNode));\n      } // const mergedResourceFlow = await this.flowMixer.mergedMultiFlow(subGroup);\n\n\n      return {\n        id,\n        labelText,\n        subGroup\n      };\n    } // this is a data node\n\n\n    let result = {};\n\n    if (resourceName) {\n      // read resource\n      const resource = await this.resourceManager.getReadStream(resourceName); // apply plugin according to user selected\n\n      const applyedPluginResource = await this.pipelineWorker.applyPluginPipeline(resource, checkedPlugin);\n      result = {\n        fragments: applyedPluginResource,\n        id,\n        labelText\n      };\n    } else {\n      result = {\n        id,\n        labelText\n      };\n    }\n\n    return result;\n  } // flatten tree structure, and global merge sort all block, assigin to time line block\n  // we need to keep the right hierarchy on block which belong to the column(track) and segment\n\n\n  convertTreeToMap2D(root) {\n    // let depth = 0;\n    let queue = [root];\n    const trackList = [];\n\n    while (queue.length > 0) {\n      const {\n        id,\n        labelText,\n        subGroup,\n        fragments\n      } = queue.shift(); // this is a group node\n\n      if (subGroup) {\n        queue = queue.concat(subGroup);\n      } else if (fragments) {\n        // const flatMapProp = (m) => (p) => {\n        //     // return m.map(e => Object.assign(Array.isArray(e.group)? flatMapProp(e.group)(p): e, p));\n        //     const m1 = m.map(e => {Object.assign(e, p)});\n        //     const m2 = m1.map(e => {e.group.map(e2 => {Object.assign(e2, )})})\n        // };\n        // this.mergeInsert(blockList, flatMapProp(fragments)({id, labelText}))\n        let blockList = [];\n\n        for (let seg of fragments) {\n          const segName = seg.segmentName;\n\n          for (let blk of seg.group) {\n            const blockInfo = Object.assign({}, blk, {\n              segName\n            });\n            blockList.push(blockInfo);\n          }\n        }\n\n        const sortedBlockList = blockList.sort((a, b) => {\n          if (a.timeSpan.start == b.timeSpan.start) {\n            if (a.timeSpan.end == b.timeSpan.end) return 0;\n            return a.timeSpan.end > b.timeSpan.end ? 1 : -1;\n          }\n\n          ;\n          return a.timeSpan.start > b.timeSpan.start ? 1 : -1;\n        });\n        trackList.push({\n          id,\n          labelText,\n          dataList: sortedBlockList\n        });\n      } else {\n        throw Error(`invalid node, id: ${id}`);\n      }\n    } // group block into 2d array by time span\n\n\n    const computedMap = trackList.map(track => Object.assign(track, {\n      cursor: 0,\n      cellMap: [[]]\n    }));\n\n    const hasData = t => t.cursor < t.dataList.length; // sort by start time in column order list\n\n\n    let minStartTime = \"9999-99-99 99:99:99.9999\"; // let selectTrackWhichHasMinStartItem = [];\n\n    let selectTrackWhichHasMinStartItemSet = [];\n    let maxBottomTime = -1;\n    let maxEndInd = -1;\n\n    const createNewRow = cm => {\n      for (let [i, t] of cm.entries()) {\n        t.cellMap.push([]);\n      }\n    };\n\n    let c = 0; // console.log(trackList[0].dataList[computedMap[0].dataList.length - 4]);\n\n    while (computedMap.some(hasData)) {\n      // console.log(\"=======================\");\n      // find the min start time of element from cursor list\n      selectTrackWhichHasMinStartItemSet = [];\n      let localMinStartTime = \"9999-99-99 99:99:99.9999\";\n\n      for (let [i, t] of computedMap.entries()) {\n        if (t.cursor >= t.dataList.length) continue;\n        const {\n          start: curStartTime,\n          end: curEndTime\n        } = t.dataList[t.cursor].timeSpan; // console.log(curStartTime, minStartTime);\n\n        if (curStartTime < localMinStartTime) {\n          localMinStartTime = curStartTime;\n          selectTrackWhichHasMinStartItemSet = [i];\n        } else if (curStartTime == localMinStartTime) {\n          selectTrackWhichHasMinStartItemSet.push(i);\n        }\n      }\n\n      if (minStartTime > localMinStartTime) {\n        minStartTime = localMinStartTime;\n      } // console.log(selectTrackWhichHasMinStartItemSet, minStartTime, maxBottomTime);\n      // c++;\n      // if (c > 10) return;\n      // find other same value for selectTrackWhichHasMinStartItemSet\n\n\n      console.log(selectTrackWhichHasMinStartItemSet);\n      let hasSealRow = false;\n      let hasFlushedAll = false;\n\n      for (let selectTrackWhichHasMinStartItem of selectTrackWhichHasMinStartItemSet) {\n        // console.log(selectTrackWhichHasMinStartItem);\n        const selectedTrack = computedMap[selectTrackWhichHasMinStartItem];\n        const selectedLayerInTrack = selectedTrack.dataList[selectedTrack.cursor];\n        const {\n          curStartTime,\n          curEndTime\n        } = selectedLayerInTrack.timeSpan; // check if seal row, the further layer should be added in the new row\n\n        if (!hasSealRow && (curStartTime > maxBottomTime || selectedTrack.cursor > 0 && selectedLayerInTrack.segName != selectedTrack.dataList[selectedTrack.cursor - 1].segName)) {\n          createNewRow(computedMap);\n          hasSealRow = true;\n          minStartTime = curStartTime;\n        }\n\n        selectedTrack.cellMap[selectedTrack.cellMap.length - 1].push(selectedTrack.dataList[selectedTrack.cursor]); // expand bound bottom box \n\n        if (curEndTime > maxBottomTime) {\n          maxBottomTime = curEndTime;\n        }\n\n        selectedTrack.cursor++;\n\n        if (selectedTrack.cursor == selectedTrack.dataList.length) {\n          // reset min start time\n          hasFlushedAll = true;\n          console.log(`track ${selectedTrack.labelText} flushed`);\n        }\n      }\n\n      if (hasFlushedAll) {\n        createNewRow(computedMap);\n        minStartTime = \"9999-99-99 99:99:99.9999\";\n      } // for(let t of computedMap) {\n      //     console.log(t.cursor, t.cellMap);\n      // }\n\n    } // unionTimeSection(blockList);\n\n\n    const selectField = t => {\n      const {\n        id,\n        labelText,\n        cellMap\n      } = t;\n      return {\n        id,\n        labelText,\n        cellMap\n      };\n    };\n\n    return computedMap.map(selectField);\n  } // BS insert, and group in time section\n  // mergeInsert(activeList, element) {\n  //     const {start, end} = element;\n  //     if (activeList.length == 0) {\n  //         activeList.push({\n  //             start,\n  //             end,\n  //             data: [\n  //                 element\n  //             ]\n  //         });\n  //         return;\n  //     } else {\n  //         const latestWindow = activeList[activeList.length - 1];\n  //     }\n  // }\n\n\n  async run() {\n    const documentTree = await this.createResourceFlow(this.nodeTree); // transform to timeline view\n\n    const diagram = this.convertTreeToMap2D(documentTree);\n    return diagram;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TaskRunner);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9UYXNrUnVubmVyLmpzPzg3YjAiXSwibmFtZXMiOlsiVGFza1J1bm5lciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwiZmxvd01peGVyIiwiRmxvd01peGVyIiwicGlwZWxpbmVXb3JrZXIiLCJQaXBlbGluZVdvcmtlciIsInJlc291cmNlTWFuYWdlciIsIlJlc291cmNlTWFuYWdlciIsImNyZWF0ZVJlc291cmNlRmxvdyIsIm5vZGVJbmZvIiwiaWQiLCJsYWJlbFRleHQiLCJyZXNvdXJjZU5hbWUiLCJub2RlVHlwZSIsIm5vZGVEZXRhaWxUeXBlIiwiY2hlY2tlZFBsdWdpbiIsImNoaWxkcmVuIiwibGVuZ3RoIiwic3ViR3JvdXAiLCJzdWJOb2RlIiwicHVzaCIsInJlc3VsdCIsInJlc291cmNlIiwiZ2V0UmVhZFN0cmVhbSIsImFwcGx5ZWRQbHVnaW5SZXNvdXJjZSIsImFwcGx5UGx1Z2luUGlwZWxpbmUiLCJmcmFnbWVudHMiLCJjb252ZXJ0VHJlZVRvTWFwMkQiLCJyb290IiwicXVldWUiLCJ0cmFja0xpc3QiLCJzaGlmdCIsImNvbmNhdCIsImJsb2NrTGlzdCIsInNlZyIsInNlZ05hbWUiLCJzZWdtZW50TmFtZSIsImJsayIsImdyb3VwIiwiYmxvY2tJbmZvIiwiT2JqZWN0IiwiYXNzaWduIiwic29ydGVkQmxvY2tMaXN0Iiwic29ydCIsImEiLCJiIiwidGltZVNwYW4iLCJzdGFydCIsImVuZCIsImRhdGFMaXN0IiwiRXJyb3IiLCJjb21wdXRlZE1hcCIsIm1hcCIsInRyYWNrIiwiY3Vyc29yIiwiY2VsbE1hcCIsImhhc0RhdGEiLCJ0IiwibWluU3RhcnRUaW1lIiwic2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCIsIm1heEJvdHRvbVRpbWUiLCJtYXhFbmRJbmQiLCJjcmVhdGVOZXdSb3ciLCJjbSIsImkiLCJlbnRyaWVzIiwiYyIsInNvbWUiLCJsb2NhbE1pblN0YXJ0VGltZSIsImN1clN0YXJ0VGltZSIsImN1ckVuZFRpbWUiLCJjb25zb2xlIiwibG9nIiwiaGFzU2VhbFJvdyIsImhhc0ZsdXNoZWRBbGwiLCJzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtIiwic2VsZWN0ZWRUcmFjayIsInNlbGVjdGVkTGF5ZXJJblRyYWNrIiwic2VsZWN0RmllbGQiLCJydW4iLCJkb2N1bWVudFRyZWUiLCJkaWFncmFtIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFVBQU4sQ0FBaUI7QUFDYkMsYUFBVyxDQUFDQyxTQUFELEVBQVlDLGFBQVosRUFBMkI7QUFDbEMsU0FBS0MsUUFBTCxHQUFnQkYsU0FBaEI7QUFDQSxTQUFLRyxZQUFMLEdBQW9CRixhQUFwQjtBQUNBLFNBQUtHLFNBQUwsR0FBaUIsSUFBSUMsK0NBQUosQ0FBY0wsU0FBZCxFQUF5QkMsYUFBekIsQ0FBakI7QUFDQSxTQUFLSyxjQUFMLEdBQXNCLElBQUlDLG9EQUFKLENBQW1CUCxTQUFuQixFQUE4QkMsYUFBOUIsQ0FBdEI7QUFDQSxTQUFLTyxlQUFMLEdBQXVCLElBQUlDLHFEQUFKLENBQW9CVCxTQUFwQixFQUErQkMsYUFBL0IsQ0FBdkI7QUFDSDs7QUFFRCxRQUFNUyxrQkFBTixDQUF5QkMsUUFBekIsRUFBbUM7QUFDL0IsVUFBTTtBQUFDQyxRQUFEO0FBQUtDLGVBQUw7QUFBZ0JDLGtCQUFoQjtBQUE4QkMsY0FBOUI7QUFBd0NDLG9CQUF4QztBQUF3REMsbUJBQXhEO0FBQXVFQztBQUF2RSxRQUFtRlAsUUFBekYsQ0FEK0IsQ0FFL0I7O0FBQ0EsUUFBSU8sUUFBUSxJQUFJQSxRQUFRLENBQUNDLE1BQVQsR0FBa0IsQ0FBbEMsRUFBcUM7QUFDakM7QUFDQSxZQUFNQyxRQUFRLEdBQUcsRUFBakI7O0FBQ0EsV0FBSyxJQUFJQyxPQUFULElBQW9CSCxRQUFwQixFQUE4QjtBQUMxQkUsZ0JBQVEs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QUFaLENBQWdCMEIsV0FBaEIsQ0FBUDtBQUNILEdBM0tZLENBOEtiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7QUFFQSxRQUFNQyxHQUFOLEdBQVk7QUFDUixVQUFNQyxZQUFZLEdBQUcsTUFBTSxLQUFLeEUsa0JBQUwsQ0FBd0IsS0FBS1IsUUFBN0IsQ0FBM0IsQ0FEUSxDQUVSOztBQUNBLFVBQU1pRixPQUFPLEdBQUcsS0FBS3RELGtCQUFMLENBQXdCcUQsWUFBeEIsQ0FBaEI7QUFDQSxXQUFPQyxPQUFQO0FBQ0g7O0FBdE1ZOztBQXlNakIsK0RBQWVyRixVQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9UYXNrUnVubmVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZsb3dNaXhlciBmcm9tICcuL0Zsb3dNaXhlcic7XG5pbXBvcnQgUGlwZWxpbmVXb3JrZXIgZnJvbSAnLi9QaXBlbGluZVdvcmtlcic7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gJy4vUmVzb3VyY2VNYW5hZ2VyJztcblxuY2xhc3MgVGFza1J1bm5lciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICAgICAgdGhpcy5mbG93TWl4ZXIgPSBuZXcgRmxvd01peGVyKF9ub2RlVHJlZSwgX2J1aWxkUHJvZmlsZSk7XG4gICAgICAgIHRoaXMucGlwZWxpbmVXb3JrZXIgPSBuZXcgUGlwZWxpbmVXb3JrZXIoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKF9ub2RlVHJlZSwgX2J1aWxkUHJvZmlsZSk7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGNyZWF0ZVJlc291cmNlRmxvdyhub2RlSW5mbykge1xuICAgICAgICBjb25zdCB7aWQsIGxhYmVsVGV4dCwgcmVzb3VyY2VOYW1lLCBub2RlVHlwZSwgbm9kZURldGFpbFR5cGUsIGNoZWNrZWRQbHVnaW4sIGNoaWxkcmVufSA9IG5vZGVJbmZvO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbWl4IG5vZGVcbiAgICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGNvbmNhdCBldmVyeSBub2RlIGluZm9cbiAgICAgICAgICAgIGNvbnN0IHN1Ykdyb3VwID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzdWJOb2RlIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgc3ViR3JvdXAucHVzaChhd2FpdCB0aGlzLmNyZWF0ZVJlc291cmNlRmxvdyhzdWJOb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb25zdCBtZXJnZWRSZXNvdXJjZUZsb3cgPSBhd2FpdCB0aGlzLmZsb3dNaXhlci5tZXJnZWRNdWx0aUZsb3coc3ViR3JvdXApO1xuICAgICAgICAgICAgcmV0dXJuIHtpZCwgbGFiZWxUZXh0LCBzdWJHcm91cH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyBhIGRhdGEgbm9kZVxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XG4gICAgICAgIGlmIChyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIHJlYWQgcmVzb3VyY2VcbiAgICAgICAgICAgIGNvbnN0IHJlc291cmNlID0gYXdhaXQgdGhpcy5yZXNvdXJjZU1hbmFnZXIuZ2V0UmVhZFN0cmVhbShyZXNvdXJjZU5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBseSBwbHVnaW4gYWNjb3JkaW5nIHRvIHVzZXIgc2VsZWN0ZWRcbiAgICAgICAgICAgIGNvbnN0IGFwcGx5ZWRQbHVnaW5SZXNvdXJjZSA9IGF3YWl0IHRoaXMucGlwZWxpbmVXb3JrZXIuYXBwbHlQbHVnaW5QaXBlbGluZShyZXNvdXJjZSwgY2hlY2tlZFBsdWdpbik7XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHtmcmFnbWVudHM6IGFwcGx5ZWRQbHVnaW5SZXNvdXJjZSwgaWQsIGxhYmVsVGV4dH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7aWQsIGxhYmVsVGV4dH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBmbGF0dGVuIHRyZWUgc3RydWN0dXJlLCBhbmQgZ2xvYmFsIG1lcmdlIHNvcnQgYWxsIGJsb2NrLCBhc3NpZ2luIHRvIHRpbWUgbGluZSBibG9ja1xuICAgIC8vIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmlnaHQgaGllcmFyY2h5IG9uIGJsb2NrIHdoaWNoIGJlbG9uZyB0byB0aGUgY29sdW1uKHRyYWNrKSBhbmQgc2VnbWVudFxuICAgIGNvbnZlcnRUcmVlVG9NYXAyRChyb290KSB7XG4gICAgICAgIC8vIGxldCBkZXB0aCA9IDA7XG4gICAgICAgIGxldCBxdWV1ZSA9IFtyb290XTtcbiAgICAgICAgY29uc3QgdHJhY2tMaXN0ID0gW107XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB7aWQsIGxhYmVsVGV4dCwgc3ViR3JvdXAsIGZyYWdtZW50c30gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGdyb3VwIG5vZGVcbiAgICAgICAgICAgIGlmIChzdWJHcm91cCkge1xuICAgICAgICAgICAgICAgIHF1ZXVlID0gcXVldWUuY29uY2F0KHN1Ykdyb3VwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZnJhZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc3QgZmxhdE1hcFByb3AgPSAobSkgPT4gKHApID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gcmV0dXJuIG0ubWFwKGUgPT4gT2JqZWN0LmFzc2lnbihBcnJheS5pc0FycmF5KGUuZ3JvdXApPyBmbGF0TWFwUHJvcChlLmdyb3VwKShwKTogZSwgcCkpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBtMSA9IG0ubWFwKGUgPT4ge09iamVjdC5hc3NpZ24oZSwgcCl9KTtcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgbTIgPSBtMS5tYXAoZSA9PiB7ZS5ncm91cC5tYXAoZTIgPT4ge09iamVjdC5hc3NpZ24oZTIsICl9KX0pXG4gICAgICAgICAgICAgICAgLy8gfTtcblxuICAgICAgICAgICAgICAgIC8vIHRoaXMubWVyZ2VJbnNlcnQoYmxvY2tMaXN0LCBmbGF0TWFwUHJvcChmcmFnbWVudHMpKHtpZCwgbGFiZWxUZXh0fSkpXG4gICAgICAgICAgICAgICAgbGV0IGJsb2NrTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHNlZyBvZiBmcmFnbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnTmFtZSA9IHNlZy5zZWdtZW50TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYmxrIG9mIHNlZy5ncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tJbmZvID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzZWdOYW1lLH0sXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tMaXN0LnB1c2goYmxvY2tJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRCbG9ja0xpc3QgPSBibG9ja0xpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEudGltZVNwYW4uc3RhcnQgPT0gYi50aW1lU3Bhbi5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnRpbWVTcGFuLmVuZCA9PSBiLnRpbWVTcGFuLmVuZCkgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhLnRpbWVTcGFuLmVuZCA+IGIudGltZVNwYW4uZW5kKT8gMTogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhLnRpbWVTcGFuLnN0YXJ0ID4gYi50aW1lU3Bhbi5zdGFydCk/IDE6IC0xO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0cmFja0xpc3QucHVzaCh7IGlkLCBsYWJlbFRleHQsIGRhdGFMaXN0OiBzb3J0ZWRCbG9ja0xpc3R9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYGludmFsaWQgbm9kZSwgaWQ6ICR7aWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBncm91cCBibG9jayBpbnRvIDJkIGFycmF5IGJ5IHRpbWUgc3BhblxuICAgICAgICBjb25zdCBjb21wdXRlZE1hcCA9IHRyYWNrTGlzdC5tYXAodHJhY2sgPT4gT2JqZWN0LmFzc2lnbih0cmFjaywgeyBjdXJzb3I6IDAsIGNlbGxNYXA6IFtbXV0gfSkpXG4gICAgICAgIGNvbnN0IGhhc0RhdGEgPSAodCkgPT4gdC5jdXJzb3IgPCB0LmRhdGFMaXN0Lmxlbmd0aDtcbiAgICAgICAgLy8gc29ydCBieSBzdGFydCB0aW1lIGluIGNvbHVtbiBvcmRlciBsaXN0XG4gICAgICAgIGxldCBtaW5TdGFydFRpbWUgPSBcIjk5OTktOTktOTkgOTk6OTk6OTkuOTk5OVwiO1xuICAgICAgICAvLyBsZXQgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbSA9IFtdO1xuICAgICAgICBsZXQgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCA9IFtdO1xuICAgICAgICBsZXQgbWF4Qm90dG9tVGltZSA9IC0xO1xuICAgICAgICBsZXQgbWF4RW5kSW5kID0gLTE7XG4gICAgICAgIGNvbnN0IGNyZWF0ZU5ld1JvdyA9IChjbSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgW2ksIHRdIG9mIGNtLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIHQuY2VsbE1hcC5wdXNoKFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0cmFja0xpc3RbMF0uZGF0YUxpc3RbY29tcHV0ZWRNYXBbMF0uZGF0YUxpc3QubGVuZ3RoIC0gNF0pO1xuICAgICAgICB3aGlsZSAoY29tcHV0ZWRNYXAuc29tZShoYXNEYXRhKSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PVwiKTtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIG1pbiBzdGFydCB0aW1lIG9mIGVsZW1lbnQgZnJvbSBjdXJzb3IgbGlzdFxuICAgICAgICAgICAgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCA9IFtdO1xuICAgICAgICAgICAgbGV0IGxvY2FsTWluU3RhcnRUaW1lID0gXCI5OTk5LTk5LTk5IDk5Ojk5Ojk5Ljk5OTlcIjtcbiAgICAgICAgICAgIGZvciAobGV0IFtpLCB0XSBvZiBjb21wdXRlZE1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5jdXJzb3IgPj0gdC5kYXRhTGlzdC5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHtzdGFydDogY3VyU3RhcnRUaW1lLCBlbmQ6IGN1ckVuZFRpbWV9ID0gdC5kYXRhTGlzdFt0LmN1cnNvcl0udGltZVNwYW47XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY3VyU3RhcnRUaW1lLCBtaW5TdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJTdGFydFRpbWUgPCBsb2NhbE1pblN0YXJ0VGltZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbE1pblN0YXJ0VGltZSA9IGN1clN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCA9IFtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1clN0YXJ0VGltZSA9PSBsb2NhbE1pblN0YXJ0VGltZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtU2V0LnB1c2goaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1pblN0YXJ0VGltZSA+IGxvY2FsTWluU3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgbWluU3RhcnRUaW1lID0gbG9jYWxNaW5TdGFydFRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW1TZXQsIG1pblN0YXJ0VGltZSwgbWF4Qm90dG9tVGltZSk7XG4gICAgICAgICAgICAvLyBjKys7XG4gICAgICAgICAgICAvLyBpZiAoYyA+IDEwKSByZXR1cm47XG4gICAgICAgICAgICAvLyBmaW5kIG90aGVyIHNhbWUgdmFsdWUgZm9yIHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW1TZXRcblxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCk7XG4gICAgICAgICAgICBsZXQgaGFzU2VhbFJvdyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGhhc0ZsdXNoZWRBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW0gb2Ygc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVHJhY2sgPSBjb21wdXRlZE1hcFtzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRMYXllckluVHJhY2sgPSBzZWxlY3RlZFRyYWNrLmRhdGFMaXN0W3NlbGVjdGVkVHJhY2suY3Vyc29yXTtcbiAgICAgICAgICAgICAgICBjb25zdCB7Y3VyU3RhcnRUaW1lLCBjdXJFbmRUaW1lfSA9IHNlbGVjdGVkTGF5ZXJJblRyYWNrLnRpbWVTcGFuO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlYWwgcm93LCB0aGUgZnVydGhlciBsYXllciBzaG91bGQgYmUgYWRkZWQgaW4gdGhlIG5ldyByb3dcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1NlYWxSb3cgJiYgXG4gICAgICAgICAgICAgICAgICAgIChjdXJTdGFydFRpbWUgPiBtYXhCb3R0b21UaW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAoc2VsZWN0ZWRUcmFjay5jdXJzb3IgPiAwICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYXllckluVHJhY2suc2VnTmFtZSAhPSBzZWxlY3RlZFRyYWNrLmRhdGFMaXN0W3NlbGVjdGVkVHJhY2suY3Vyc29yIC0gMV0uc2VnTmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1Jvdyhjb21wdXRlZE1hcCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlYWxSb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtaW5TdGFydFRpbWUgPSBjdXJTdGFydFRpbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRUcmFjay5jZWxsTWFwW3NlbGVjdGVkVHJhY2suY2VsbE1hcC5sZW5ndGggLSAxXS5wdXNoKHNlbGVjdGVkVHJhY2suZGF0YUxpc3Rbc2VsZWN0ZWRUcmFjay5jdXJzb3JdKTtcbiAgICAgICAgICAgICAgICAvLyBleHBhbmQgYm91bmQgYm90dG9tIGJveCBcbiAgICAgICAgICAgICAgICBpZiAoY3VyRW5kVGltZSA+IG1heEJvdHRvbVRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4Qm90dG9tVGltZSA9IGN1ckVuZFRpbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRUcmFjay5jdXJzb3IgKys7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRUcmFjay5jdXJzb3IgPT0gc2VsZWN0ZWRUcmFjay5kYXRhTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgbWluIHN0YXJ0IHRpbWVcbiAgICAgICAgICAgICAgICAgICAgaGFzRmx1c2hlZEFsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB0cmFjayAke3NlbGVjdGVkVHJhY2subGFiZWxUZXh0fSBmbHVzaGVkYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0ZsdXNoZWRBbGwpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVOZXdSb3coY29tcHV0ZWRNYXApO1xuICAgICAgICAgICAgICAgIG1pblN0YXJ0VGltZSA9IFwiOTk5OS05OS05OSA5OTo5OTo5OS45OTk5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmb3IobGV0IHQgb2YgY29tcHV0ZWRNYXApIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0LmN1cnNvciwgdC5jZWxsTWFwKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIC8vIHVuaW9uVGltZVNlY3Rpb24oYmxvY2tMaXN0KTtcbiAgICAgICAgY29uc3Qgc2VsZWN0RmllbGQgPSAodCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qge2lkLCBsYWJlbFRleHQsIGNlbGxNYXB9ID0gdDtcbiAgICAgICAgICAgIHJldHVybiB7aWQsIGxhYmVsVGV4dCwgY2VsbE1hcH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjb21wdXRlZE1hcC5tYXAoc2VsZWN0RmllbGQpO1xuICAgIH1cblxuICAgIFxuICAgIC8vIEJTIGluc2VydCwgYW5kIGdyb3VwIGluIHRpbWUgc2VjdGlvblxuICAgIC8vIG1lcmdlSW5zZXJ0KGFjdGl2ZUxpc3QsIGVsZW1lbnQpIHtcbiAgICAvLyAgICAgY29uc3Qge3N0YXJ0LCBlbmR9ID0gZWxlbWVudDtcbiAgICAvLyAgICAgaWYgKGFjdGl2ZUxpc3QubGVuZ3RoID09IDApIHtcbiAgICAvLyAgICAgICAgIGFjdGl2ZUxpc3QucHVzaCh7XG4gICAgLy8gICAgICAgICAgICAgc3RhcnQsXG4gICAgLy8gICAgICAgICAgICAgZW5kLFxuICAgIC8vICAgICAgICAgICAgIGRhdGE6IFtcbiAgICAvLyAgICAgICAgICAgICAgICAgZWxlbWVudFxuICAgIC8vICAgICAgICAgICAgIF1cbiAgICAvLyAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgIC8vICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgY29uc3QgbGF0ZXN0V2luZG93ID0gYWN0aXZlTGlzdFthY3RpdmVMaXN0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgXG4gICAgLy8gICAgIH1cbiAgICAgICAgIFxuICAgIC8vIH1cblxuICAgIGFzeW5jIHJ1bigpIHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRUcmVlID0gYXdhaXQgdGhpcy5jcmVhdGVSZXNvdXJjZUZsb3codGhpcy5ub2RlVHJlZSk7XG4gICAgICAgIC8vIHRyYW5zZm9ybSB0byB0aW1lbGluZSB2aWV3XG4gICAgICAgIGNvbnN0IGRpYWdyYW0gPSB0aGlzLmNvbnZlcnRUcmVlVG9NYXAyRChkb2N1bWVudFRyZWUpO1xuICAgICAgICByZXR1cm4gZGlhZ3JhbTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tSdW5uZXI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./service/TaskRunner.js\n");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("cors");;

/***/ }),

/***/ "es6-promise":
/*!******************************!*\
  !*** external "es6-promise" ***!
  \******************************/
/***/ (function(module) {

"use strict";
module.exports = require("es6-promise");;

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ (function(module) {

"use strict";
module.exports = require("events");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ (function(module) {

"use strict";
module.exports = require("fs");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("path");;

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ (function(module) {

"use strict";
module.exports = require("readline");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = (__webpack_exec__("./pages/api/task/submit.js"));
module.exports = __webpack_exports__;

})();