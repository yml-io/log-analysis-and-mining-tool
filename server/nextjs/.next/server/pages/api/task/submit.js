/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function() {
var exports = {};
exports.id = "pages/api/task/submit";
exports.ids = ["pages/api/task/submit"];
exports.modules = {

/***/ "./lib/init_middleware.js":
/*!********************************!*\
  !*** ./lib/init_middleware.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ initMiddleware; }\n/* harmony export */ });\n// Helper method to wait for a middleware to execute before continuing\n// And to throw an error when an error happens in a middleware\nfunction initMiddleware(middleware) {\n  return (req, res) => new Promise((resolve, reject) => {\n    middleware(req, res, result => {\n      if (result instanceof Error) {\n        return reject(result);\n      }\n\n      return resolve(result);\n    });\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vbGliL2luaXRfbWlkZGxld2FyZS5qcz9kMTJiIl0sIm5hbWVzIjpbImluaXRNaWRkbGV3YXJlIiwibWlkZGxld2FyZSIsInJlcSIsInJlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVzdWx0IiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ2UsU0FBU0EsY0FBVCxDQUF3QkMsVUFBeEIsRUFBb0M7QUFDL0MsU0FBTyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FDTCxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQy9CTCxjQUFVLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFZSSxNQUFELElBQVk7QUFDL0IsVUFBSUEsTUFBTSxZQUFZQyxLQUF0QixFQUE2QjtBQUMzQixlQUFPRixNQUFNLENBQUNDLE1BQUQsQ0FBYjtBQUNEOztBQUNELGFBQU9GLE9BQU8sQ0FBQ0UsTUFBRCxDQUFkO0FBQ0QsS0FMUyxDQUFWO0FBTUQsR0FQRCxDQURGO0FBU0QiLCJmaWxlIjoiLi9saWIvaW5pdF9taWRkbGV3YXJlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSGVscGVyIG1ldGhvZCB0byB3YWl0IGZvciBhIG1pZGRsZXdhcmUgdG8gZXhlY3V0ZSBiZWZvcmUgY29udGludWluZ1xuLy8gQW5kIHRvIHRocm93IGFuIGVycm9yIHdoZW4gYW4gZXJyb3IgaGFwcGVucyBpbiBhIG1pZGRsZXdhcmVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRNaWRkbGV3YXJlKG1pZGRsZXdhcmUpIHtcbiAgICByZXR1cm4gKHJlcSwgcmVzKSA9PlxuICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBtaWRkbGV3YXJlKHJlcSwgcmVzLCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdClcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/init_middleware.js\n");

/***/ }),

/***/ "./lib/plugin-compose.js":
/*!*******************************!*\
  !*** ./lib/plugin-compose.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createComposeMiddleware\": function() { return /* binding */ createComposeMiddleware; },\n/* harmony export */   \"loadCachedMiddleware\": function() { return /* binding */ loadCachedMiddleware; }\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst createComposeMiddleware = (cached, composeList) => {\n  if (!Array.isArray(composeList)) {\n    throw TypeError(\"require [compose list] list of middleware id\");\n  }\n\n  return function (context) {\n    let index = -1; // if (index === i) {\n    //     throw new Error('next function triggered more than once');\n    // }\n\n    return dispatch(0);\n\n    function dispatch(i) {\n      index++;\n      if (i >= composeList.length) return null;\n      const fn = cached[composeList[i]].exports.handler;\n      return fn(context, dispatch.bind(null, i + 1));\n    }\n  };\n}; // plugin loader\n\nconst loadCachedMiddleware = () => {\n  const pluginDir = `./plugins`; // scan plugin dir\n\n  const pluginDirList = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(pluginDir);\n  const middlewares = {};\n\n  for (let folder of pluginDirList) {\n    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(pluginDir, folder); // const stat = fs.statSync(filePath);\n\n    const manifest = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'manifest.json');\n    const mf = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.js');\n\n    try {\n      const meta = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(manifest, 'utf-8'));\n      const content = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(mf);\n      const fn = new Function('n', content);\n      const exports = fn();\n      const component = {\n        index: path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.html')\n      };\n      middlewares[meta.id] = Object.assign({}, meta, {\n        exports\n      }, {\n        component\n      });\n    } catch (loadException) {\n      console.log(`can not load middleware: ${name}, ${loadException}`);\n    }\n  }\n\n  return middlewares;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vbGliL3BsdWdpbi1jb21wb3NlLmpzPzllMjMiXSwibmFtZXMiOlsiY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUiLCJjYWNoZWQiLCJjb21wb3NlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsIlR5cGVFcnJvciIsImNvbnRleHQiLCJpbmRleCIsImRpc3BhdGNoIiwiaSIsImxlbmd0aCIsImZuIiwiZXhwb3J0cyIsImhhbmRsZXIiLCJiaW5kIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJwbHVnaW5EaXIiLCJwbHVnaW5EaXJMaXN0IiwiZnMiLCJtaWRkbGV3YXJlcyIsImZvbGRlciIsImZpbGVQYXRoIiwicGF0aCIsIm1hbmlmZXN0IiwibWYiLCJtZXRhIiwiSlNPTiIsInBhcnNlIiwiY29udGVudCIsIkZ1bmN0aW9uIiwiY29tcG9uZW50IiwiaWQiLCJPYmplY3QiLCJhc3NpZ24iLCJsb2FkRXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyIsIm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFTyxNQUFNQSx1QkFBdUIsR0FBRyxDQUFDQyxNQUFELEVBQVNDLFdBQVQsS0FBeUI7QUFDNUQsTUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0YsV0FBZCxDQUFMLEVBQWlDO0FBQzdCLFVBQU1HLFNBQVMsQ0FBQyw4Q0FBRCxDQUFmO0FBQ0g7O0FBQ0QsU0FBTyxVQUFTQyxPQUFULEVBQWtCO0FBQ3JCLFFBQUlDLEtBQUssR0FBRyxDQUFDLENBQWIsQ0FEcUIsQ0FFckI7QUFDQTtBQUNBOztBQUNBLFdBQU9DLFFBQVEsQ0FBQyxDQUFELENBQWY7O0FBQ0EsYUFBU0EsUUFBVCxDQUFrQkMsQ0FBbEIsRUFBcUI7QUFDakJGLFdBQUs7QUFDTCxVQUFJRSxDQUFDLElBQUlQLFdBQVcsQ0FBQ1EsTUFBckIsRUFBNkIsT0FBTyxJQUFQO0FBQzdCLFlBQU1DLEVBQUUsR0FBR1YsTUFBTSxDQUFDQyxXQUFXLENBQUNPLENBQUQsQ0FBWixDQUFOLENBQXVCRyxPQUF2QixDQUErQkMsT0FBMUM7QUFDQSxhQUFPRixFQUFFLENBQUNMLE9BQUQsRUFBVUUsUUFBUSxDQUFDTSxJQUFULENBQWMsSUFBZCxFQUFvQkwsQ0FBQyxHQUFDLENBQXRCLENBQVYsQ0FBVDtBQUNIO0FBQ0osR0FaRDtBQWFILENBakJNLEMsQ0FtQlA7O0FBQ08sTUFBTU0sb0JBQW9CLEdBQUcsTUFBTTtBQUN0QyxRQUFNQyxTQUFTLEdBQUksV0FBbkIsQ0FEc0MsQ0FFdEM7O0FBQ0EsUUFBTUMsYUFBYSxHQUFHQyxxREFBQSxDQUFlRixTQUFmLENBQXRCO0FBQ0EsUUFBTUcsV0FBVyxHQUFHLEVBQXBCOztBQUNBLE9BQUssSUFBSUMsTUFBVCxJQUFtQkgsYUFBbkIsRUFBa0M7QUFDOUIsVUFBTUksUUFBUSxHQUFHQyxnREFBQSxDQUFVTixTQUFWLEVBQXFCSSxNQUFyQixDQUFqQixDQUQ4QixDQUUxQjs7QUFDSixVQUFNRyxRQUFRLEdBQUdELGdEQUFBLENBQVVELFFBQVYsRUFBb0IsZUFBcEIsQ0FBakI7QUFDQSxVQUFNRyxFQUFFLEdBQUdGLGdEQUFBLENBQVVELFFBQVYsRUFBb0IsV0FBcEIsQ0FBWDs7QUFDQSxRQUFHO0FBQ0MsWUFBTUksSUFBSSxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV1Qsc0RBQUEsQ0FBZ0JLLFFBQWhCLEVBQTBCLE9BQTFCLENBQVgsQ0FBYjtBQUNBLFlBQU1LLE9BQU8sR0FBR1Ysc0RBQUEsQ0FBZ0JNLEVBQWhCLENBQWhCO0FBQ0EsWUFBTWIsRUFBRSxHQUFHLElBQUlrQixRQUFKLENBQWEsR0FBYixFQUFrQkQsT0FBbEIsQ0FBWDtBQUNBLFlBQU1oQixPQUFPLEdBQUdELEVBQUUsRUFBbEI7QUFDQSxZQUFNbUIsU0FBUyxHQUFHO0FBQ2R2QixhQUFLLEVBQUVlLGdEQUFBLENBQVVELFFBQVYsRUFBb0IsYUFBcEI7QUFETyxPQUFsQjtBQUdBRixpQkFBVyxDQUFDTSxJQUFJLENBQUNNLEVBQU4sQ0FBWCxHQUF1QkMsTUFBTSxDQUFDQyxNQUFQLENBQWMsRUFBZCxFQUFrQlIsSUFBbEIsRUFBd0I7QUFBQ2I7QUFBRCxPQUF4QixFQUFtQztBQUFDa0I7QUFBRCxPQUFuQyxDQUF2QjtBQUVILEtBVkQsQ0FVRSxPQUFNSSxhQUFOLEVBQXFCO0FBQ25CQyxhQUFPLENBQUNDLEdBQVIsQ0FBYSw0QkFBMkJDLElBQUssS0FBSUgsYUFBYyxFQUEvRDtBQUNIO0FBQ0o7O0FBQ0QsU0FBT2YsV0FBUDtBQUNILENBekJNIiwiZmlsZSI6Ii4vbGliL3BsdWdpbi1jb21wb3NlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUgPSAoY2FjaGVkLCBjb21wb3NlTGlzdCkgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb21wb3NlTGlzdCkpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicmVxdWlyZSBbY29tcG9zZSBsaXN0XSBsaXN0IG9mIG1pZGRsZXdhcmUgaWRcIik7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuICAgICAgICAvLyBpZiAoaW5kZXggPT09IGkpIHtcbiAgICAgICAgLy8gICAgIHRocm93IG5ldyBFcnJvcignbmV4dCBmdW5jdGlvbiB0cmlnZ2VyZWQgbW9yZSB0aGFuIG9uY2UnKTtcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gZGlzcGF0Y2goMCk7XG4gICAgICAgIGZ1bmN0aW9uIGRpc3BhdGNoKGkpIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAoaSA+PSBjb21wb3NlTGlzdC5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBjYWNoZWRbY29tcG9zZUxpc3RbaV1dLmV4cG9ydHMuaGFuZGxlcjtcbiAgICAgICAgICAgIHJldHVybiBmbihjb250ZXh0LCBkaXNwYXRjaC5iaW5kKG51bGwsIGkrMSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBwbHVnaW4gbG9hZGVyXG5leHBvcnQgY29uc3QgbG9hZENhY2hlZE1pZGRsZXdhcmUgPSAoKSA9PiB7XG4gICAgY29uc3QgcGx1Z2luRGlyID0gYC4vcGx1Z2luc2A7XG4gICAgLy8gc2NhbiBwbHVnaW4gZGlyXG4gICAgY29uc3QgcGx1Z2luRGlyTGlzdCA9IGZzLnJlYWRkaXJTeW5jKHBsdWdpbkRpcik7XG4gICAgY29uc3QgbWlkZGxld2FyZXMgPSB7fTtcbiAgICBmb3IgKGxldCBmb2xkZXIgb2YgcGx1Z2luRGlyTGlzdCkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwbHVnaW5EaXIsIGZvbGRlcik7XG4gICAgICAgICAgICAvLyBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuICAgICAgICBjb25zdCBtYW5pZmVzdCA9IHBhdGguam9pbihmaWxlUGF0aCwgJ21hbmlmZXN0Lmpzb24nKTtcbiAgICAgICAgY29uc3QgbWYgPSBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuanMnKTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKG1hbmlmZXN0LCAndXRmLTgnKSlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobWYpO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oJ24nLCBjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydHMgPSBmbigpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuaHRtbCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWlkZGxld2FyZXNbbWV0YS5pZF0gPSBPYmplY3QuYXNzaWduKHt9LCBtZXRhLCB7ZXhwb3J0c30sIHtjb21wb25lbnR9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoKGxvYWRFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBjYW4gbm90IGxvYWQgbWlkZGxld2FyZTogJHtuYW1lfSwgJHtsb2FkRXhjZXB0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaWRkbGV3YXJlcztcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/plugin-compose.js\n");

/***/ }),

/***/ "./pages/api/task/submit.js":
/*!**********************************!*\
  !*** ./pages/api/task/submit.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ handler; }\n/* harmony export */ });\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/init_middleware */ \"./lib/init_middleware.js\");\n/* harmony import */ var _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../service/TaskRunner */ \"./service/TaskRunner.js\");\n\n\n\nconst cors = (0,_lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__.default)(cors__WEBPACK_IMPORTED_MODULE_0___default()({\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nasync function handler(req, res) {\n  await cors(req, res);\n  const {\n    nodeTree,\n    buildProfile\n  } = req.body;\n  const taskRunner = new _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__.default(nodeTree, buildProfile);\n  const analysisDiagram = await taskRunner.run();\n  res.status(200).json({\n    data: {\n      diagram: analysisDiagram\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vcGFnZXMvYXBpL3Rhc2svc3VibWl0LmpzPzEyMWMiXSwibmFtZXMiOlsiY29ycyIsImluaXRNaWRkbGV3YXJlIiwiQ29ycyIsIm1ldGhvZHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibm9kZVRyZWUiLCJidWlsZFByb2ZpbGUiLCJib2R5IiwidGFza1J1bm5lciIsIlRhc2tSdW5uZXIiLCJhbmFseXNpc0RpYWdyYW0iLCJydW4iLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsImRpYWdyYW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUEsTUFBTUEsSUFBSSxHQUFHQyw2REFBYyxDQUN6QkMsMkNBQUksQ0FBQztBQUNIQyxTQUFPLEVBQUUsQ0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixTQUFoQjtBQUROLENBQUQsQ0FEcUIsQ0FBM0I7QUFNZSxlQUFlQyxPQUFmLENBQXVCQyxHQUF2QixFQUE0QkMsR0FBNUIsRUFBaUM7QUFDOUMsUUFBTU4sSUFBSSxDQUFDSyxHQUFELEVBQU1DLEdBQU4sQ0FBVjtBQUVBLFFBQU07QUFBQ0MsWUFBRDtBQUFXQztBQUFYLE1BQTJCSCxHQUFHLENBQUNJLElBQXJDO0FBRUEsUUFBTUMsVUFBVSxHQUFHLElBQUlDLHdEQUFKLENBQWVKLFFBQWYsRUFBeUJDLFlBQXpCLENBQW5CO0FBQ0EsUUFBTUksZUFBZSxHQUFHLE1BQU1GLFVBQVUsQ0FBQ0csR0FBWCxFQUE5QjtBQUNBUCxLQUFHLENBQUNRLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFDQyxRQUFJLEVBQUU7QUFBRUMsYUFBTyxFQUFFTDtBQUFYO0FBQVAsR0FBckI7QUFDRCIsImZpbGUiOiIuL3BhZ2VzL2FwaS90YXNrL3N1Ym1pdC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb3JzIGZyb20gJ2NvcnMnXG5pbXBvcnQgaW5pdE1pZGRsZXdhcmUgZnJvbSAnLi4vLi4vLi4vbGliL2luaXRfbWlkZGxld2FyZSdcbmltcG9ydCBUYXNrUnVubmVyIGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvVGFza1J1bm5lcic7XG5cbmNvbnN0IGNvcnMgPSBpbml0TWlkZGxld2FyZShcbiAgQ29ycyh7XG4gICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCcsICdPUFRJT05TJ10sXG4gIH0pXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgYXdhaXQgY29ycyhyZXEsIHJlcylcblxuICBjb25zdCB7bm9kZVRyZWUsIGJ1aWxkUHJvZmlsZX0gPSByZXEuYm9keTtcblxuICBjb25zdCB0YXNrUnVubmVyID0gbmV3IFRhc2tSdW5uZXIobm9kZVRyZWUsIGJ1aWxkUHJvZmlsZSk7XG4gIGNvbnN0IGFuYWx5c2lzRGlhZ3JhbSA9IGF3YWl0IHRhc2tSdW5uZXIucnVuKCk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtkYXRhOiB7IGRpYWdyYW06IGFuYWx5c2lzRGlhZ3JhbSB9fSlcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/api/task/submit.js\n");

/***/ }),

/***/ "./service/FlowMixer.js":
/*!******************************!*\
  !*** ./service/FlowMixer.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Promise = __webpack_require__(/*! es6-promise */ \"es6-promise\").Promise;\n\nclass FlowMixer {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n  }\n\n  async mergedMultiFlow(flowList) {\n    const flowValueList = await Promise.all(flowList); // assume text line format\n\n    const concatedFile = flowValueList.reduce((a, c) => a.concat(c), \"\");\n    return concatedFile;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FlowMixer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9GbG93TWl4ZXIuanM/NzFiZiJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsIkZsb3dNaXhlciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwibWVyZ2VkTXVsdGlGbG93IiwiZmxvd0xpc3QiLCJmbG93VmFsdWVMaXN0IiwiYWxsIiwiY29uY2F0ZWRGaWxlIiwicmVkdWNlIiwiYSIsImMiLCJjb25jYXQiXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFJQSxPQUFPLEdBQUdDLDZEQUFkOztBQUVBLE1BQU1DLFNBQU4sQ0FBZ0I7QUFDWkMsYUFBVyxDQUFDQyxTQUFELEVBQVlDLGFBQVosRUFBMkI7QUFDbEMsU0FBS0MsUUFBTCxHQUFnQkYsU0FBaEI7QUFDQSxTQUFLRyxZQUFMLEdBQW9CRixhQUFwQjtBQUNIOztBQUNELFFBQU1HLGVBQU4sQ0FBc0JDLFFBQXRCLEVBQWdDO0FBQzVCLFVBQU1DLGFBQWEsR0FBRyxNQUFNVixPQUFPLENBQUNXLEdBQVIsQ0FBWUYsUUFBWixDQUE1QixDQUQ0QixDQUU1Qjs7QUFDQSxVQUFNRyxZQUFZLEdBQUdGLGFBQWEsQ0FBQ0csTUFBZCxDQUFxQixDQUFDQyxDQUFELEVBQUlDLENBQUosS0FBVUQsQ0FBQyxDQUFDRSxNQUFGLENBQVNELENBQVQsQ0FBL0IsRUFBNEMsRUFBNUMsQ0FBckI7QUFDQSxXQUFPSCxZQUFQO0FBQ0g7O0FBVlc7O0FBYWhCLCtEQUFlVixTQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9GbG93TWl4ZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuY2xhc3MgRmxvd01peGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihfbm9kZVRyZWUsIF9idWlsZFByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5ub2RlVHJlZSA9IF9ub2RlVHJlZTtcbiAgICAgICAgdGhpcy5idWlsZFByb2ZpbGUgPSBfYnVpbGRQcm9maWxlO1xuICAgIH1cbiAgICBhc3luYyBtZXJnZWRNdWx0aUZsb3coZmxvd0xpc3QpIHtcbiAgICAgICAgY29uc3QgZmxvd1ZhbHVlTGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKGZsb3dMaXN0KTtcbiAgICAgICAgLy8gYXNzdW1lIHRleHQgbGluZSBmb3JtYXRcbiAgICAgICAgY29uc3QgY29uY2F0ZWRGaWxlID0gZmxvd1ZhbHVlTGlzdC5yZWR1Y2UoKGEsIGMpID0+IGEuY29uY2F0KGMpLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGNvbmNhdGVkRmlsZTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZsb3dNaXhlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./service/FlowMixer.js\n");

/***/ }),

/***/ "./service/PipelineWorker.js":
/*!***********************************!*\
  !*** ./service/PipelineWorker.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! readline */ \"readline\");\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(readline__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/plugin-compose */ \"./lib/plugin-compose.js\");\n\n\n\n\nclass PipelineWorker {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile; // create compose plugin handler chain\n\n    const cachedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.loadCachedMiddleware)();\n    const composedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.createComposeMiddleware)(cachedMiddleware, [\"acabula-middleware-chunkify\", \"acabula-middleware-genelizer\", \"acabula-middleware-syntax-highlight\"]);\n    this.composedPlugin = composedMiddleware;\n  }\n\n  async applyPluginPipeline(resource, checkedPlugin) {\n    // checkedPlugin shoud be a list of object with user option parameters\n    const ordinaryPluginList = checkedPlugin.sort(); // make compose plugin chain\n    // const composedPlugin = (v) => {return v.slice(0, 100)};\n\n    const result = [];\n    await async function (fn) {\n      try {\n        const rl = (0,readline__WEBPACK_IMPORTED_MODULE_1__.createInterface)({\n          input: resource,\n          crlfDelay: Infinity\n        });\n        rl.on('line', line => {\n          const context = {\n            data: line\n          };\n          fn(context);\n          result.push(context.data);\n        });\n        await (0,events__WEBPACK_IMPORTED_MODULE_0__.once)(rl, 'close');\n        console.log('finished');\n      } catch (err) {\n        console.error(err);\n      }\n    }(this.composedPlugin);\n    return result;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PipelineWorker);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9QaXBlbGluZVdvcmtlci5qcz9lNDAwIl0sIm5hbWVzIjpbIlBpcGVsaW5lV29ya2VyIiwiY29uc3RydWN0b3IiLCJfbm9kZVRyZWUiLCJfYnVpbGRQcm9maWxlIiwibm9kZVRyZWUiLCJidWlsZFByb2ZpbGUiLCJjYWNoZWRNaWRkbGV3YXJlIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJjb21wb3NlZE1pZGRsZXdhcmUiLCJjcmVhdGVDb21wb3NlTWlkZGxld2FyZSIsImNvbXBvc2VkUGx1Z2luIiwiYXBwbHlQbHVnaW5QaXBlbGluZSIsInJlc291cmNlIiwiY2hlY2tlZFBsdWdpbiIsIm9yZGluYXJ5UGx1Z2luTGlzdCIsInNvcnQiLCJyZXN1bHQiLCJmbiIsInJsIiwiY3JlYXRlSW50ZXJmYWNlIiwiaW5wdXQiLCJjcmxmRGVsYXkiLCJJbmZpbml0eSIsIm9uIiwibGluZSIsImNvbnRleHQiLCJkYXRhIiwicHVzaCIsIm9uY2UiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7QUFHQSxNQUFNQSxjQUFOLENBQXFCO0FBQ2pCQyxhQUFXLENBQUNDLFNBQUQsRUFBWUMsYUFBWixFQUEyQjtBQUNsQyxTQUFLQyxRQUFMLEdBQWdCRixTQUFoQjtBQUNBLFNBQUtHLFlBQUwsR0FBb0JGLGFBQXBCLENBRmtDLENBR2xDOztBQUNBLFVBQU1HLGdCQUFnQixHQUFHQyx5RUFBb0IsRUFBN0M7QUFDQSxVQUFNQyxrQkFBa0IsR0FBR0MsNEVBQXVCLENBQzlDSCxnQkFEOEMsRUFFOUMsQ0FBQyw2QkFBRCxFQUNBLDhCQURBLEVBRUEscUNBRkEsQ0FGOEMsQ0FBbEQ7QUFLQSxTQUFLSSxjQUFMLEdBQXNCRixrQkFBdEI7QUFDSDs7QUFFRCxRQUFNRyxtQkFBTixDQUEwQkMsUUFBMUIsRUFBb0NDLGFBQXBDLEVBQW1EO0FBQy9DO0FBRUEsVUFBTUMsa0JBQWtCLEdBQUdELGFBQWEsQ0FBQ0UsSUFBZCxFQUEzQixDQUgrQyxDQUkvQztBQUNBOztBQUNBLFVBQU1DLE1BQU0sR0FBRyxFQUFmO0FBQ0EsVUFBTyxnQkFBZUMsRUFBZixFQUFtQjtBQUN0QixVQUFJO0FBQ0EsY0FBTUMsRUFBRSxHQUFHQyx5REFBZSxDQUFDO0FBQ3ZCQyxlQUFLLEVBQUVSLFFBRGdCO0FBRXZCUyxtQkFBUyxFQUFFQztBQUZZLFNBQUQsQ0FBMUI7QUFLQUosVUFBRSxDQUFDSyxFQUFILENBQU0sTUFBTixFQUFlQyxJQUFELElBQVU7QUFDcEIsZ0JBQU1DLE9BQU8sR0FBRztBQUFDQyxnQkFBSSxFQUFFRjtBQUFQLFdBQWhCO0FBQ0FQLFlBQUUsQ0FBQ1EsT0FBRCxDQUFGO0FBQ0FULGdCQUFNLENBQUNXLElBQVAsQ0FBWUYsT0FBTyxDQUFDQyxJQUFwQjtBQUNILFNBSkQ7QUFNQSxjQUFNRSw0Q0FBSSxDQUFDVixFQUFELEVBQUssT0FBTCxDQUFWO0FBRUFXLGVBQU8sQ0FBQ0MsR0FBUixDQUFZLFVBQVo7QUFDSCxPQWZELENBZUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1ZGLGVBQU8sQ0FBQ0csS0FBUixDQUFjRCxHQUFkO0FBQ0g7QUFDSixLQW5CSyxDQW1CSCxLQUFLckIsY0FuQkYsQ0FBTjtBQW9CQSxXQUFPTSxNQUFQO0FBQ0g7O0FBMUNnQjs7QUE2Q3JCLCtEQUFlaEIsY0FBZiIsImZpbGUiOiIuL3NlcnZpY2UvUGlwZWxpbmVXb3JrZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvbmNlIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IGNyZWF0ZUludGVyZmFjZSB9IGZyb20gJ3JlYWRsaW5lJztcbmltcG9ydCB7IGxvYWRDYWNoZWRNaWRkbGV3YXJlLCBjcmVhdGVDb21wb3NlTWlkZGxld2FyZSwgIH0gZnJvbSAnLi4vbGliL3BsdWdpbi1jb21wb3NlJztcblxuXG5jbGFzcyBQaXBlbGluZVdvcmtlciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICAgICAgLy8gY3JlYXRlIGNvbXBvc2UgcGx1Z2luIGhhbmRsZXIgY2hhaW5cbiAgICAgICAgY29uc3QgY2FjaGVkTWlkZGxld2FyZSA9IGxvYWRDYWNoZWRNaWRkbGV3YXJlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBvc2VkTWlkZGxld2FyZSA9IGNyZWF0ZUNvbXBvc2VNaWRkbGV3YXJlKFxuICAgICAgICAgICAgY2FjaGVkTWlkZGxld2FyZSwgXG4gICAgICAgICAgICBbXCJhY2FidWxhLW1pZGRsZXdhcmUtY2h1bmtpZnlcIiwgXG4gICAgICAgICAgICBcImFjYWJ1bGEtbWlkZGxld2FyZS1nZW5lbGl6ZXJcIiwgXG4gICAgICAgICAgICBcImFjYWJ1bGEtbWlkZGxld2FyZS1zeW50YXgtaGlnaGxpZ2h0XCJdKTtcbiAgICAgICAgdGhpcy5jb21wb3NlZFBsdWdpbiA9IGNvbXBvc2VkTWlkZGxld2FyZTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgYXBwbHlQbHVnaW5QaXBlbGluZShyZXNvdXJjZSwgY2hlY2tlZFBsdWdpbikge1xuICAgICAgICAvLyBjaGVja2VkUGx1Z2luIHNob3VkIGJlIGEgbGlzdCBvZiBvYmplY3Qgd2l0aCB1c2VyIG9wdGlvbiBwYXJhbWV0ZXJzXG4gICAgICAgIFxuICAgICAgICBjb25zdCBvcmRpbmFyeVBsdWdpbkxpc3QgPSBjaGVja2VkUGx1Z2luLnNvcnQoKTtcbiAgICAgICAgLy8gbWFrZSBjb21wb3NlIHBsdWdpbiBjaGFpblxuICAgICAgICAvLyBjb25zdCBjb21wb3NlZFBsdWdpbiA9ICh2KSA9PiB7cmV0dXJuIHYuc2xpY2UoMCwgMTAwKX07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBhd2FpdCAoYXN5bmMgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmwgPSBjcmVhdGVJbnRlcmZhY2Uoe1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogcmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNybGZEZWxheTogSW5maW5pdHlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBybC5vbignbGluZScsIChsaW5lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7ZGF0YTogbGluZX07XG4gICAgICAgICAgICAgICAgICAgIGZuKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjb250ZXh0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IG9uY2UocmwsICdjbG9zZScpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaW5pc2hlZCcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSh0aGlzLmNvbXBvc2VkUGx1Z2luKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBpcGVsaW5lV29ya2VyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./service/PipelineWorker.js\n");

/***/ }),

/***/ "./service/ResourceManager.js":
/*!************************************!*\
  !*** ./service/ResourceManager.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst {\n  readFile,\n  createReadStream\n} = __webpack_require__(/*! fs */ \"fs\");\n\nvar Promise = __webpack_require__(/*! es6-promise */ \"es6-promise\").Promise;\n\nclass ResourceManager {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n  }\n\n  async getResource(resourceName) {\n    // use sync read\n    const fileContent = await new Promise(function (resolve, reject) {\n      readFile(`./upload/${resourceName}`, 'utf8', result => {\n        resolve(result);\n      });\n    });\n    return fileContent;\n  }\n\n  async getReadStream(resourceName) {\n    const fileName = `./upload/${resourceName}`;\n    const fileStream = createReadStream(fileName);\n    return fileStream;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ResourceManager);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9SZXNvdXJjZU1hbmFnZXIuanM/YzM0YiJdLCJuYW1lcyI6WyJyZWFkRmlsZSIsImNyZWF0ZVJlYWRTdHJlYW0iLCJyZXF1aXJlIiwiUHJvbWlzZSIsIlJlc291cmNlTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwiZ2V0UmVzb3VyY2UiLCJyZXNvdXJjZU5hbWUiLCJmaWxlQ29udGVudCIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJnZXRSZWFkU3RyZWFtIiwiZmlsZU5hbWUiLCJmaWxlU3RyZWFtIl0sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTTtBQUFFQSxVQUFGO0FBQVlDO0FBQVosSUFBaUNDLG1CQUFPLENBQUMsY0FBRCxDQUE5Qzs7QUFDQSxJQUFJQyxPQUFPLEdBQUdELDZEQUFkOztBQUVBLE1BQU1FLGVBQU4sQ0FBc0I7QUFDbEJDLGFBQVcsQ0FBQ0MsU0FBRCxFQUFZQyxhQUFaLEVBQTJCO0FBQ2xDLFNBQUtDLFFBQUwsR0FBZ0JGLFNBQWhCO0FBQ0EsU0FBS0csWUFBTCxHQUFvQkYsYUFBcEI7QUFDSDs7QUFDRCxRQUFNRyxXQUFOLENBQWtCQyxZQUFsQixFQUFnQztBQUM1QjtBQUNBLFVBQU1DLFdBQVcsR0FBRyxNQUFNLElBQUlULE9BQUosQ0FDMUIsVUFBU1UsT0FBVCxFQUFrQkMsTUFBbEIsRUFBMEI7QUFDdEJkLGNBQVEsQ0FBRSxZQUFXVyxZQUFhLEVBQTFCLEVBQTZCLE1BQTdCLEVBQXNDSSxNQUFELElBQVU7QUFDbkRGLGVBQU8sQ0FBQ0UsTUFBRCxDQUFQO0FBQ0gsT0FGTyxDQUFSO0FBR0gsS0FMeUIsQ0FBMUI7QUFNQSxXQUFPSCxXQUFQO0FBQ0g7O0FBQ0QsUUFBTUksYUFBTixDQUFvQkwsWUFBcEIsRUFBa0M7QUFDOUIsVUFBTU0sUUFBUSxHQUFJLFlBQVdOLFlBQWEsRUFBMUM7QUFDQSxVQUFNTyxVQUFVLEdBQUdqQixnQkFBZ0IsQ0FBQ2dCLFFBQUQsQ0FBbkM7QUFDQSxXQUFPQyxVQUFQO0FBQ0g7O0FBbkJpQjs7QUFzQnRCLCtEQUFlZCxlQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9SZXNvdXJjZU1hbmFnZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJlYWRGaWxlLCBjcmVhdGVSZWFkU3RyZWFtIH0gPSByZXF1aXJlKCdmcycpO1xudmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG5cbmNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVzb3VyY2UocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgIC8vIHVzZSBzeW5jIHJlYWRcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBuZXcgUHJvbWlzZShcbiAgICAgICAgZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICByZWFkRmlsZShgLi91cGxvYWQvJHtyZXNvdXJjZU5hbWV9YCwgJ3V0ZjgnLCAocmVzdWx0KT0+e1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmlsZUNvbnRlbnQ7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlYWRTdHJlYW0ocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYC4vdXBsb2FkLyR7cmVzb3VyY2VOYW1lfWA7XG4gICAgICAgIGNvbnN0IGZpbGVTdHJlYW0gPSBjcmVhdGVSZWFkU3RyZWFtKGZpbGVOYW1lKTtcbiAgICAgICAgcmV0dXJuIGZpbGVTdHJlYW07XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXNvdXJjZU1hbmFnZXI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./service/ResourceManager.js\n");

/***/ }),

/***/ "./service/TaskRunner.js":
/*!*******************************!*\
  !*** ./service/TaskRunner.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FlowMixer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FlowMixer */ \"./service/FlowMixer.js\");\n/* harmony import */ var _PipelineWorker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PipelineWorker */ \"./service/PipelineWorker.js\");\n/* harmony import */ var _ResourceManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ResourceManager */ \"./service/ResourceManager.js\");\n\n\n\n\nclass TaskRunner {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile;\n    this.flowMixer = new _FlowMixer__WEBPACK_IMPORTED_MODULE_0__.default(_nodeTree, _buildProfile);\n    this.pipelineWorker = new _PipelineWorker__WEBPACK_IMPORTED_MODULE_1__.default(_nodeTree, _buildProfile);\n    this.resourceManager = new _ResourceManager__WEBPACK_IMPORTED_MODULE_2__.default(_nodeTree, _buildProfile);\n  }\n\n  async createResourceFlow(nodeInfo) {\n    const {\n      id,\n      labelText,\n      resourceName,\n      nodeType,\n      nodeDetailType,\n      checkedPlugin,\n      children\n    } = nodeInfo; // check if this is a mix node\n\n    if (children && children.length > 0) {\n      // concat every node info\n      const compareGroup = [];\n\n      for (let subNode of children) {\n        compareGroup.push(await this.createResourceFlow(subNode));\n      } // const mergedResourceFlow = await this.flowMixer.mergedMultiFlow(compareGroup);\n\n\n      return {\n        id,\n        labelText,\n        compareGroup\n      };\n    } // this is a data node\n\n\n    let result = {};\n\n    if (resourceName) {\n      // read resource\n      const resource = await this.resourceManager.getReadStream(resourceName); // apply plugin according to user selected\n\n      const applyedPluginResource = await this.pipelineWorker.applyPluginPipeline(resource, checkedPlugin);\n      result = {\n        fragments: applyedPluginResource,\n        id,\n        labelText\n      };\n    } else {\n      result = {\n        id,\n        labelText\n      };\n    }\n\n    return result;\n  }\n\n  async run() {\n    const result = await this.createResourceFlow(this.nodeTree);\n    return result;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TaskRunner);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9UYXNrUnVubmVyLmpzPzg3YjAiXSwibmFtZXMiOlsiVGFza1J1bm5lciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwiYnVpbGRQcm9maWxlIiwiZmxvd01peGVyIiwiRmxvd01peGVyIiwicGlwZWxpbmVXb3JrZXIiLCJQaXBlbGluZVdvcmtlciIsInJlc291cmNlTWFuYWdlciIsIlJlc291cmNlTWFuYWdlciIsImNyZWF0ZVJlc291cmNlRmxvdyIsIm5vZGVJbmZvIiwiaWQiLCJsYWJlbFRleHQiLCJyZXNvdXJjZU5hbWUiLCJub2RlVHlwZSIsIm5vZGVEZXRhaWxUeXBlIiwiY2hlY2tlZFBsdWdpbiIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY29tcGFyZUdyb3VwIiwic3ViTm9kZSIsInB1c2giLCJyZXN1bHQiLCJyZXNvdXJjZSIsImdldFJlYWRTdHJlYW0iLCJhcHBseWVkUGx1Z2luUmVzb3VyY2UiLCJhcHBseVBsdWdpblBpcGVsaW5lIiwiZnJhZ21lbnRzIiwicnVuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFVBQU4sQ0FBaUI7QUFDYkMsYUFBVyxDQUFDQyxTQUFELEVBQVlDLGFBQVosRUFBMkI7QUFDbEMsU0FBS0MsUUFBTCxHQUFnQkYsU0FBaEI7QUFDQSxTQUFLRyxZQUFMLEdBQW9CRixhQUFwQjtBQUNBLFNBQUtHLFNBQUwsR0FBaUIsSUFBSUMsK0NBQUosQ0FBY0wsU0FBZCxFQUF5QkMsYUFBekIsQ0FBakI7QUFDQSxTQUFLSyxjQUFMLEdBQXNCLElBQUlDLG9EQUFKLENBQW1CUCxTQUFuQixFQUE4QkMsYUFBOUIsQ0FBdEI7QUFDQSxTQUFLTyxlQUFMLEdBQXVCLElBQUlDLHFEQUFKLENBQW9CVCxTQUFwQixFQUErQkMsYUFBL0IsQ0FBdkI7QUFDSDs7QUFFRCxRQUFNUyxrQkFBTixDQUF5QkMsUUFBekIsRUFBbUM7QUFDL0IsVUFBTTtBQUFDQyxRQUFEO0FBQUtDLGVBQUw7QUFBZ0JDLGtCQUFoQjtBQUE4QkMsY0FBOUI7QUFBd0NDLG9CQUF4QztBQUF3REMsbUJBQXhEO0FBQXVFQztBQUF2RSxRQUFtRlAsUUFBekYsQ0FEK0IsQ0FFL0I7O0FBQ0EsUUFBSU8sUUFBUSxJQUFJQSxRQUFRLENBQUNDLE1BQVQsR0FBa0IsQ0FBbEMsRUFBcUM7QUFDakM7QUFDQSxZQUFNQyxZQUFZLEdBQUcsRUFBckI7O0FBQ0EsV0FBSyxJQUFJQyxPQUFULElBQW9CSCxRQUFwQixFQUE4QjtBQUMxQkUsb0JBQVksQ0FBQ0UsSUFBYixDQUFrQixNQUFNLEtBQUtaLGtCQUFMLENBQXdCVyxPQUF4QixDQUF4QjtBQUNILE9BTGdDLENBTWpDOzs7QUFDQSxhQUFPO0FBQUNULFVBQUQ7QUFBS0MsaUJBQUw7QUFBZ0JPO0FBQWhCLE9BQVA7QUFDSCxLQVg4QixDQVkvQjs7O0FBQ0EsUUFBSUcsTUFBTSxHQUFHLEVBQWI7O0FBQ0EsUUFBSVQsWUFBSixFQUFrQjtBQUNkO0FBQ0EsWUFBTVUsUUFBUSxHQUFHLE1BQU0sS0FBS2hCLGVBQUwsQ0FBcUJpQixhQUFyQixDQUFtQ1gsWUFBbkMsQ0FBdkIsQ0FGYyxDQUlkOztBQUNBLFlBQU1ZLHFCQUFxQixHQUFHLE1BQU0sS0FBS3BCLGNBQUwsQ0FBb0JxQixtQkFBcEIsQ0FBd0NILFFBQXhDLEVBQWtEUCxhQUFsRCxDQUFwQztBQUNBTSxZQUFNLEdBQUc7QUFBQ0ssaUJBQVMsRUFBRUYscUJBQVo7QUFBbUNkLFVBQW5DO0FBQXVDQztBQUF2QyxPQUFUO0FBQ0gsS0FQRCxNQU9PO0FBQ0hVLFlBQU0sR0FBRztBQUFDWCxVQUFEO0FBQUtDO0FBQUwsT0FBVDtBQUNIOztBQUNELFdBQU9VLE1BQVA7QUFDSDs7QUFFRCxRQUFNTSxHQUFOLEdBQVk7QUFDUixVQUFNTixNQUFNLEdBQUcsTUFBTSxLQUFLYixrQkFBTCxDQUF3QixLQUFLUixRQUE3QixDQUFyQjtBQUNBLFdBQU9xQixNQUFQO0FBQ0g7O0FBdkNZOztBQTBDakIsK0RBQWV6QixVQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9UYXNrUnVubmVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZsb3dNaXhlciBmcm9tICcuL0Zsb3dNaXhlcic7XG5pbXBvcnQgUGlwZWxpbmVXb3JrZXIgZnJvbSAnLi9QaXBlbGluZVdvcmtlcic7XG5pbXBvcnQgUmVzb3VyY2VNYW5hZ2VyIGZyb20gJy4vUmVzb3VyY2VNYW5hZ2VyJztcblxuY2xhc3MgVGFza1J1bm5lciB7XG4gICAgY29uc3RydWN0b3IoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICAgICAgdGhpcy5mbG93TWl4ZXIgPSBuZXcgRmxvd01peGVyKF9ub2RlVHJlZSwgX2J1aWxkUHJvZmlsZSk7XG4gICAgICAgIHRoaXMucGlwZWxpbmVXb3JrZXIgPSBuZXcgUGlwZWxpbmVXb3JrZXIoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKF9ub2RlVHJlZSwgX2J1aWxkUHJvZmlsZSk7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGNyZWF0ZVJlc291cmNlRmxvdyhub2RlSW5mbykge1xuICAgICAgICBjb25zdCB7aWQsIGxhYmVsVGV4dCwgcmVzb3VyY2VOYW1lLCBub2RlVHlwZSwgbm9kZURldGFpbFR5cGUsIGNoZWNrZWRQbHVnaW4sIGNoaWxkcmVufSA9IG5vZGVJbmZvO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbWl4IG5vZGVcbiAgICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGNvbmNhdCBldmVyeSBub2RlIGluZm9cbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVHcm91cCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgc3ViTm9kZSBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVHcm91cC5wdXNoKGF3YWl0IHRoaXMuY3JlYXRlUmVzb3VyY2VGbG93KHN1Yk5vZGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnN0IG1lcmdlZFJlc291cmNlRmxvdyA9IGF3YWl0IHRoaXMuZmxvd01peGVyLm1lcmdlZE11bHRpRmxvdyhjb21wYXJlR3JvdXApO1xuICAgICAgICAgICAgcmV0dXJuIHtpZCwgbGFiZWxUZXh0LCBjb21wYXJlR3JvdXB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgaXMgYSBkYXRhIG5vZGVcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgICAgICBpZiAocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgICAgICAvLyByZWFkIHJlc291cmNlXG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZSA9IGF3YWl0IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldFJlYWRTdHJlYW0ocmVzb3VyY2VOYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwbHkgcGx1Z2luIGFjY29yZGluZyB0byB1c2VyIHNlbGVjdGVkXG4gICAgICAgICAgICBjb25zdCBhcHBseWVkUGx1Z2luUmVzb3VyY2UgPSBhd2FpdCB0aGlzLnBpcGVsaW5lV29ya2VyLmFwcGx5UGx1Z2luUGlwZWxpbmUocmVzb3VyY2UsIGNoZWNrZWRQbHVnaW4pO1xuICAgICAgICAgICAgcmVzdWx0ID0ge2ZyYWdtZW50czogYXBwbHllZFBsdWdpblJlc291cmNlLCBpZCwgbGFiZWxUZXh0fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHtpZCwgbGFiZWxUZXh0fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGFzeW5jIHJ1bigpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jcmVhdGVSZXNvdXJjZUZsb3codGhpcy5ub2RlVHJlZSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUYXNrUnVubmVyOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./service/TaskRunner.js\n");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("cors");;

/***/ }),

/***/ "es6-promise":
/*!******************************!*\
  !*** external "es6-promise" ***!
  \******************************/
/***/ (function(module) {

"use strict";
module.exports = require("es6-promise");;

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ (function(module) {

"use strict";
module.exports = require("events");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ (function(module) {

"use strict";
module.exports = require("fs");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("path");;

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ (function(module) {

"use strict";
module.exports = require("readline");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = (__webpack_exec__("./pages/api/task/submit.js"));
module.exports = __webpack_exports__;

})();