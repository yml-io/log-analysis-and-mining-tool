/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function() {
var exports = {};
exports.id = "pages/api/task/submit";
exports.ids = ["pages/api/task/submit"];
exports.modules = {

/***/ "./lib/plugin-compose.js":
/*!*******************************!*\
  !*** ./lib/plugin-compose.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createComposeMiddleware\": function() { return /* binding */ createComposeMiddleware; },\n/* harmony export */   \"loadCachedMiddleware\": function() { return /* binding */ loadCachedMiddleware; }\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst createComposeMiddleware = (cached, composeList) => {\n  if (!Array.isArray(composeList)) {\n    throw TypeError(\"require [compose list] list of middleware id\");\n  }\n\n  return function (context) {\n    let index = -1;\n    return dispatch(0);\n\n    function dispatch(i) {\n      index++;\n      if (i >= composeList.length) return null;\n      const fn = cached[composeList[i]].exports.handler;\n      return fn(context, dispatch.bind(null, i + 1));\n    }\n  };\n}; // plugin loader\n\nconst loadCachedMiddleware = () => {\n  const pluginDir = `./plugins`; // scan plugin dir\n\n  const pluginDirList = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(pluginDir);\n  const middlewares = {};\n\n  for (let folder of pluginDirList) {\n    const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(pluginDir, folder); // const stat = fs.statSync(filePath);\n\n    const manifest = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'manifest.json');\n    const mf = path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.js');\n\n    try {\n      const meta = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(manifest, 'utf-8'));\n      const content = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(mf);\n      const fn = new Function('n', content);\n      const exports = fn();\n      const component = {\n        index: path__WEBPACK_IMPORTED_MODULE_1___default().join(filePath, 'module.html')\n      };\n      middlewares[meta.id] = Object.assign({}, meta, {\n        exports,\n        component\n      });\n    } catch (loadException) {\n      console.log(`can not load middleware: ${folder}, ${loadException}`);\n    }\n  }\n\n  return middlewares;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vbGliL3BsdWdpbi1jb21wb3NlLmpzPzllMjMiXSwibmFtZXMiOlsiY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUiLCJjYWNoZWQiLCJjb21wb3NlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsIlR5cGVFcnJvciIsImNvbnRleHQiLCJpbmRleCIsImRpc3BhdGNoIiwiaSIsImxlbmd0aCIsImZuIiwiZXhwb3J0cyIsImhhbmRsZXIiLCJiaW5kIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJwbHVnaW5EaXIiLCJwbHVnaW5EaXJMaXN0IiwiZnMiLCJtaWRkbGV3YXJlcyIsImZvbGRlciIsImZpbGVQYXRoIiwicGF0aCIsIm1hbmlmZXN0IiwibWYiLCJtZXRhIiwiSlNPTiIsInBhcnNlIiwiY29udGVudCIsIkZ1bmN0aW9uIiwiY29tcG9uZW50IiwiaWQiLCJPYmplY3QiLCJhc3NpZ24iLCJsb2FkRXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVPLE1BQU1BLHVCQUF1QixHQUFHLENBQUNDLE1BQUQsRUFBU0MsV0FBVCxLQUF5QjtBQUM1RCxNQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTixDQUFjRixXQUFkLENBQUwsRUFBaUM7QUFDN0IsVUFBTUcsU0FBUyxDQUFDLDhDQUFELENBQWY7QUFDSDs7QUFDRCxTQUFPLFVBQVNDLE9BQVQsRUFBa0I7QUFDckIsUUFBSUMsS0FBSyxHQUFHLENBQUMsQ0FBYjtBQUNBLFdBQU9DLFFBQVEsQ0FBQyxDQUFELENBQWY7O0FBQ0EsYUFBU0EsUUFBVCxDQUFrQkMsQ0FBbEIsRUFBcUI7QUFDakJGLFdBQUs7QUFDTCxVQUFJRSxDQUFDLElBQUlQLFdBQVcsQ0FBQ1EsTUFBckIsRUFBNkIsT0FBTyxJQUFQO0FBQzdCLFlBQU1DLEVBQUUsR0FBR1YsTUFBTSxDQUFDQyxXQUFXLENBQUNPLENBQUQsQ0FBWixDQUFOLENBQXVCRyxPQUF2QixDQUErQkMsT0FBMUM7QUFDQSxhQUFPRixFQUFFLENBQUNMLE9BQUQsRUFBVUUsUUFBUSxDQUFDTSxJQUFULENBQWMsSUFBZCxFQUFvQkwsQ0FBQyxHQUFDLENBQXRCLENBQVYsQ0FBVDtBQUNIO0FBQ0osR0FURDtBQVVILENBZE0sQyxDQWdCUDs7QUFDTyxNQUFNTSxvQkFBb0IsR0FBRyxNQUFNO0FBQ3RDLFFBQU1DLFNBQVMsR0FBSSxXQUFuQixDQURzQyxDQUV0Qzs7QUFDQSxRQUFNQyxhQUFhLEdBQUdDLHFEQUFBLENBQWVGLFNBQWYsQ0FBdEI7QUFDQSxRQUFNRyxXQUFXLEdBQUcsRUFBcEI7O0FBQ0EsT0FBSyxJQUFJQyxNQUFULElBQW1CSCxhQUFuQixFQUFrQztBQUM5QixVQUFNSSxRQUFRLEdBQUdDLGdEQUFBLENBQVVOLFNBQVYsRUFBcUJJLE1BQXJCLENBQWpCLENBRDhCLENBRTFCOztBQUNKLFVBQU1HLFFBQVEsR0FBR0QsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixlQUFwQixDQUFqQjtBQUNBLFVBQU1HLEVBQUUsR0FBR0YsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixXQUFwQixDQUFYOztBQUNBLFFBQUc7QUFDQyxZQUFNSSxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXVCxzREFBQSxDQUFnQkssUUFBaEIsRUFBMEIsT0FBMUIsQ0FBWCxDQUFiO0FBQ0EsWUFBTUssT0FBTyxHQUFHVixzREFBQSxDQUFnQk0sRUFBaEIsQ0FBaEI7QUFDQSxZQUFNYixFQUFFLEdBQUcsSUFBSWtCLFFBQUosQ0FBYSxHQUFiLEVBQWtCRCxPQUFsQixDQUFYO0FBQ0EsWUFBTWhCLE9BQU8sR0FBR0QsRUFBRSxFQUFsQjtBQUNBLFlBQU1tQixTQUFTLEdBQUc7QUFDZHZCLGFBQUssRUFBRWUsZ0RBQUEsQ0FBVUQsUUFBVixFQUFvQixhQUFwQjtBQURPLE9BQWxCO0FBR0FGLGlCQUFXLENBQUNNLElBQUksQ0FBQ00sRUFBTixDQUFYLEdBQXVCQyxNQUFNLENBQUNDLE1BQVAsQ0FBYyxFQUFkLEVBQWtCUixJQUFsQixFQUF3QjtBQUFDYixlQUFEO0FBQVVrQjtBQUFWLE9BQXhCLENBQXZCO0FBRUgsS0FWRCxDQVVFLE9BQU1JLGFBQU4sRUFBcUI7QUFDbkJDLGFBQU8sQ0FBQ0MsR0FBUixDQUFhLDRCQUEyQmhCLE1BQU8sS0FBSWMsYUFBYyxFQUFqRTtBQUNIO0FBQ0o7O0FBQ0QsU0FBT2YsV0FBUDtBQUNILENBekJNIiwiZmlsZSI6Ii4vbGliL3BsdWdpbi1jb21wb3NlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUgPSAoY2FjaGVkLCBjb21wb3NlTGlzdCkgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb21wb3NlTGlzdCkpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicmVxdWlyZSBbY29tcG9zZSBsaXN0XSBsaXN0IG9mIG1pZGRsZXdhcmUgaWRcIik7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2goMCk7XG4gICAgICAgIGZ1bmN0aW9uIGRpc3BhdGNoKGkpIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAoaSA+PSBjb21wb3NlTGlzdC5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBjYWNoZWRbY29tcG9zZUxpc3RbaV1dLmV4cG9ydHMuaGFuZGxlcjtcbiAgICAgICAgICAgIHJldHVybiBmbihjb250ZXh0LCBkaXNwYXRjaC5iaW5kKG51bGwsIGkrMSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBwbHVnaW4gbG9hZGVyXG5leHBvcnQgY29uc3QgbG9hZENhY2hlZE1pZGRsZXdhcmUgPSAoKSA9PiB7XG4gICAgY29uc3QgcGx1Z2luRGlyID0gYC4vcGx1Z2luc2A7XG4gICAgLy8gc2NhbiBwbHVnaW4gZGlyXG4gICAgY29uc3QgcGx1Z2luRGlyTGlzdCA9IGZzLnJlYWRkaXJTeW5jKHBsdWdpbkRpcik7XG4gICAgY29uc3QgbWlkZGxld2FyZXMgPSB7fTtcbiAgICBmb3IgKGxldCBmb2xkZXIgb2YgcGx1Z2luRGlyTGlzdCkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwbHVnaW5EaXIsIGZvbGRlcik7XG4gICAgICAgICAgICAvLyBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuICAgICAgICBjb25zdCBtYW5pZmVzdCA9IHBhdGguam9pbihmaWxlUGF0aCwgJ21hbmlmZXN0Lmpzb24nKTtcbiAgICAgICAgY29uc3QgbWYgPSBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuanMnKTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKG1hbmlmZXN0LCAndXRmLTgnKSlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobWYpO1xuICAgICAgICAgICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oJ24nLCBjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydHMgPSBmbigpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0ge1xuICAgICAgICAgICAgICAgIGluZGV4OiBwYXRoLmpvaW4oZmlsZVBhdGgsICdtb2R1bGUuaHRtbCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWlkZGxld2FyZXNbbWV0YS5pZF0gPSBPYmplY3QuYXNzaWduKHt9LCBtZXRhLCB7ZXhwb3J0cywgY29tcG9uZW50fSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaChsb2FkRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FuIG5vdCBsb2FkIG1pZGRsZXdhcmU6ICR7Zm9sZGVyfSwgJHtsb2FkRXhjZXB0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaWRkbGV3YXJlcztcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/plugin-compose.js\n");

/***/ }),

/***/ "./pages/api/task/submit.js":
/*!**********************************!*\
  !*** ./pages/api/task/submit.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ handler; }\n/* harmony export */ });\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/init_middleware */ \"./lib/init_middleware.js\");\n/* harmony import */ var _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../service/TaskRunner */ \"./service/TaskRunner.js\");\n\n\n\nconst cors = (0,_lib_init_middleware__WEBPACK_IMPORTED_MODULE_1__.default)(cors__WEBPACK_IMPORTED_MODULE_0___default()({\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nasync function handler(req, res) {\n  await cors(req, res);\n  const {\n    nodeTree,\n    keywords,\n    buildProfile\n  } = req.body;\n  const taskRunner = new _service_TaskRunner__WEBPACK_IMPORTED_MODULE_2__.default(nodeTree, keywords, buildProfile);\n  const result = await taskRunner.run();\n  res.status(200).json({\n    data: result\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vcGFnZXMvYXBpL3Rhc2svc3VibWl0LmpzPzEyMWMiXSwibmFtZXMiOlsiY29ycyIsImluaXRNaWRkbGV3YXJlIiwiQ29ycyIsIm1ldGhvZHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibm9kZVRyZWUiLCJrZXl3b3JkcyIsImJ1aWxkUHJvZmlsZSIsImJvZHkiLCJ0YXNrUnVubmVyIiwiVGFza1J1bm5lciIsInJlc3VsdCIsInJ1biIsInN0YXR1cyIsImpzb24iLCJkYXRhIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBLE1BQU1BLElBQUksR0FBR0MsNkRBQWMsQ0FDekJDLDJDQUFJLENBQUM7QUFDSEMsU0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLE1BQVIsRUFBZ0IsU0FBaEI7QUFETixDQUFELENBRHFCLENBQTNCO0FBTWUsZUFBZUMsT0FBZixDQUF1QkMsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDO0FBQzlDLFFBQU1OLElBQUksQ0FBQ0ssR0FBRCxFQUFNQyxHQUFOLENBQVY7QUFFQSxRQUFNO0FBQUVDLFlBQUY7QUFBWUMsWUFBWjtBQUFzQkM7QUFBdEIsTUFBdUNKLEdBQUcsQ0FBQ0ssSUFBakQ7QUFFQSxRQUFNQyxVQUFVLEdBQUcsSUFBSUMsd0RBQUosQ0FBZUwsUUFBZixFQUF5QkMsUUFBekIsRUFBbUNDLFlBQW5DLENBQW5CO0FBQ0EsUUFBTUksTUFBTSxHQUFHLE1BQU1GLFVBQVUsQ0FBQ0csR0FBWCxFQUFyQjtBQUNBUixLQUFHLENBQUNTLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxRQUFJLEVBQUVKO0FBQVIsR0FBckI7QUFDRCIsImZpbGUiOiIuL3BhZ2VzL2FwaS90YXNrL3N1Ym1pdC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb3JzIGZyb20gJ2NvcnMnXG5pbXBvcnQgaW5pdE1pZGRsZXdhcmUgZnJvbSAnLi4vLi4vLi4vbGliL2luaXRfbWlkZGxld2FyZSdcbmltcG9ydCBUYXNrUnVubmVyIGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvVGFza1J1bm5lcic7XG5cbmNvbnN0IGNvcnMgPSBpbml0TWlkZGxld2FyZShcbiAgQ29ycyh7XG4gICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCcsICdPUFRJT05TJ10sXG4gIH0pXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgYXdhaXQgY29ycyhyZXEsIHJlcylcblxuICBjb25zdCB7IG5vZGVUcmVlLCBrZXl3b3JkcywgYnVpbGRQcm9maWxlIH0gPSByZXEuYm9keTtcblxuICBjb25zdCB0YXNrUnVubmVyID0gbmV3IFRhc2tSdW5uZXIobm9kZVRyZWUsIGtleXdvcmRzLCBidWlsZFByb2ZpbGUpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCB0YXNrUnVubmVyLnJ1bigpO1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHJlc3VsdCB9KVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/api/task/submit.js\n");

/***/ }),

/***/ "./service/DiagramService.js":
/*!***********************************!*\
  !*** ./service/DiagramService.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// flatten tree structure, and global merge sort all block, assigin to time line block\n// we need to keep the right hierarchy on block which belong to the column(track) and segment\nconst convertTreeToMap2D = root => {\n  // let depth = 0;\n  let queue = [root];\n  const trackList = [];\n\n  while (queue.length > 0) {\n    const {\n      id,\n      labelText,\n      subGroup,\n      fragments\n    } = queue.shift(); // this is a group node\n\n    if (subGroup) {\n      queue = queue.concat(subGroup);\n    } else if (fragments) {\n      let blockList = [];\n\n      for (let seg of fragments) {\n        const segName = seg.segmentName;\n\n        for (let blk of seg.group) {\n          const blockInfo = Object.assign({}, blk, {\n            segName\n          });\n          blockList.push(blockInfo);\n        }\n      }\n\n      const sortedBlockList = blockList.sort((a, b) => {\n        if (a.timeSpan.start == b.timeSpan.start) {\n          if (a.timeSpan.end == b.timeSpan.end) return 0;\n          return a.timeSpan.end > b.timeSpan.end ? 1 : -1;\n        }\n\n        ;\n        return a.timeSpan.start > b.timeSpan.start ? 1 : -1;\n      });\n      trackList.push({\n        id,\n        labelText,\n        dataList: sortedBlockList\n      });\n    } else {\n      throw Error(`invalid node, id: ${id}`);\n    }\n  } // group block into 2d array by time span\n\n\n  const computedMap = trackList.map(track => Object.assign(track, {\n    cursor: 0,\n    cellMap: [[]]\n  }));\n\n  const hasData = t => t.cursor < t.dataList.length; // sort by start time in column order list\n\n\n  let minStartTime = \"9999-99-99 99:99:99.9999\";\n  let selectTrackWhichHasMinStartItemSet = [];\n  let maxBottomTime = -1;\n  let maxEndInd = -1;\n\n  const createNewRow = cm => {\n    for (let [i, t] of cm.entries()) {\n      t.cellMap.push([]);\n    }\n  };\n\n  while (computedMap.some(hasData)) {\n    // find the min start time of element from cursor list\n    selectTrackWhichHasMinStartItemSet = [];\n    let localMinStartTime = \"9999-99-99 99:99:99.9999\";\n\n    for (let [i, t] of computedMap.entries()) {\n      if (t.cursor >= t.dataList.length) continue;\n      const {\n        start: curStartTime,\n        end: curEndTime\n      } = t.dataList[t.cursor].timeSpan; // console.log(curStartTime, minStartTime);\n\n      if (curStartTime < localMinStartTime) {\n        localMinStartTime = curStartTime;\n        selectTrackWhichHasMinStartItemSet = [i];\n      } else if (curStartTime == localMinStartTime) {\n        selectTrackWhichHasMinStartItemSet.push(i);\n      }\n    }\n\n    if (minStartTime > localMinStartTime) {\n      minStartTime = localMinStartTime;\n    }\n\n    let hasSealRow = false;\n    let hasFlushedAll = false;\n\n    for (let selectTrackWhichHasMinStartItem of selectTrackWhichHasMinStartItemSet) {\n      // console.log(selectTrackWhichHasMinStartItem);\n      const selectedTrack = computedMap[selectTrackWhichHasMinStartItem];\n      const selectedLayerInTrack = selectedTrack.dataList[selectedTrack.cursor];\n      const {\n        curStartTime,\n        curEndTime\n      } = selectedLayerInTrack.timeSpan; // check if seal row, the further layer should be added in the new row\n\n      if (!hasSealRow && (curStartTime > maxBottomTime || selectedTrack.cursor > 0 && selectedLayerInTrack.segName != selectedTrack.dataList[selectedTrack.cursor - 1].segName)) {\n        createNewRow(computedMap);\n        hasSealRow = true;\n        minStartTime = curStartTime;\n      }\n\n      selectedTrack.cellMap[selectedTrack.cellMap.length - 1].push(selectedTrack.dataList[selectedTrack.cursor]); // expand bound bottom box \n\n      if (curEndTime > maxBottomTime) {\n        maxBottomTime = curEndTime;\n      }\n\n      selectedTrack.cursor++;\n\n      if (selectedTrack.cursor == selectedTrack.dataList.length) {\n        // reset min start time\n        hasFlushedAll = true;\n        console.log(`track ${selectedTrack.labelText} flushed`);\n      }\n    }\n\n    if (hasFlushedAll) {\n      createNewRow(computedMap);\n      minStartTime = \"9999-99-99 99:99:99.9999\";\n    }\n  }\n\n  const selectField = t => {\n    const {\n      id,\n      labelText,\n      cellMap\n    } = t;\n    return {\n      id,\n      labelText,\n      cellMap\n    };\n  };\n\n  return computedMap.map(selectField);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  submit: documentTree => {\n    return convertTreeToMap2D(documentTree);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9EaWFncmFtU2VydmljZS5qcz9mYzIyIl0sIm5hbWVzIjpbImNvbnZlcnRUcmVlVG9NYXAyRCIsInJvb3QiLCJxdWV1ZSIsInRyYWNrTGlzdCIsImxlbmd0aCIsImlkIiwibGFiZWxUZXh0Iiwic3ViR3JvdXAiLCJmcmFnbWVudHMiLCJzaGlmdCIsImNvbmNhdCIsImJsb2NrTGlzdCIsInNlZyIsInNlZ05hbWUiLCJzZWdtZW50TmFtZSIsImJsayIsImdyb3VwIiwiYmxvY2tJbmZvIiwiT2JqZWN0IiwiYXNzaWduIiwicHVzaCIsInNvcnRlZEJsb2NrTGlzdCIsInNvcnQiLCJhIiwiYiIsInRpbWVTcGFuIiwic3RhcnQiLCJlbmQiLCJkYXRhTGlzdCIsIkVycm9yIiwiY29tcHV0ZWRNYXAiLCJtYXAiLCJ0cmFjayIsImN1cnNvciIsImNlbGxNYXAiLCJoYXNEYXRhIiwidCIsIm1pblN0YXJ0VGltZSIsInNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW1TZXQiLCJtYXhCb3R0b21UaW1lIiwibWF4RW5kSW5kIiwiY3JlYXRlTmV3Um93IiwiY20iLCJpIiwiZW50cmllcyIsInNvbWUiLCJsb2NhbE1pblN0YXJ0VGltZSIsImN1clN0YXJ0VGltZSIsImN1ckVuZFRpbWUiLCJoYXNTZWFsUm93IiwiaGFzRmx1c2hlZEFsbCIsInNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW0iLCJzZWxlY3RlZFRyYWNrIiwic2VsZWN0ZWRMYXllckluVHJhY2siLCJjb25zb2xlIiwibG9nIiwic2VsZWN0RmllbGQiLCJzdWJtaXQiLCJkb2N1bWVudFRyZWUiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0EsTUFBTUEsa0JBQWtCLEdBQUlDLElBQUQsSUFBVTtBQUNqQztBQUNBLE1BQUlDLEtBQUssR0FBRyxDQUFDRCxJQUFELENBQVo7QUFDQSxRQUFNRSxTQUFTLEdBQUcsRUFBbEI7O0FBQ0EsU0FB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QUFBakIsS0FBUDtBQUNILEdBSEQ7O0FBSUEsU0FBT0osV0FBVyxDQUFDQyxHQUFaLENBQWdCeUIsV0FBaEIsQ0FBUDtBQUNILENBOUdEOztBQWdIQSwrREFBZTtBQUNYQyxRQUFNLEVBQUdDLFlBQUQsSUFBa0I7QUFDdEIsV0FBTzFELGtCQUFrQixDQUFDMEQsWUFBRCxDQUF6QjtBQUNIO0FBSFUsQ0FBZiIsImZpbGUiOiIuL3NlcnZpY2UvRGlhZ3JhbVNlcnZpY2UuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBmbGF0dGVuIHRyZWUgc3RydWN0dXJlLCBhbmQgZ2xvYmFsIG1lcmdlIHNvcnQgYWxsIGJsb2NrLCBhc3NpZ2luIHRvIHRpbWUgbGluZSBibG9ja1xuLy8gd2UgbmVlZCB0byBrZWVwIHRoZSByaWdodCBoaWVyYXJjaHkgb24gYmxvY2sgd2hpY2ggYmVsb25nIHRvIHRoZSBjb2x1bW4odHJhY2spIGFuZCBzZWdtZW50XG5jb25zdCBjb252ZXJ0VHJlZVRvTWFwMkQgPSAocm9vdCkgPT4ge1xuICAgIC8vIGxldCBkZXB0aCA9IDA7XG4gICAgbGV0IHF1ZXVlID0gW3Jvb3RdO1xuICAgIGNvbnN0IHRyYWNrTGlzdCA9IFtdO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGxhYmVsVGV4dCwgc3ViR3JvdXAsIGZyYWdtZW50cyB9ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgLy8gdGhpcyBpcyBhIGdyb3VwIG5vZGVcbiAgICAgICAgaWYgKHN1Ykdyb3VwKSB7XG4gICAgICAgICAgICBxdWV1ZSA9IHF1ZXVlLmNvbmNhdChzdWJHcm91cCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJhZ21lbnRzKSB7XG4gICAgICAgICAgICBsZXQgYmxvY2tMaXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzZWcgb2YgZnJhZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnTmFtZSA9IHNlZy5zZWdtZW50TmFtZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBibGsgb2Ygc2VnLmdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrSW5mbyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc2VnTmFtZSwgfSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tMaXN0LnB1c2goYmxvY2tJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRCbG9ja0xpc3QgPSBibG9ja0xpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhLnRpbWVTcGFuLnN0YXJ0ID09IGIudGltZVNwYW4uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEudGltZVNwYW4uZW5kID09IGIudGltZVNwYW4uZW5kKSByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhLnRpbWVTcGFuLmVuZCA+IGIudGltZVNwYW4uZW5kKSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiAoYS50aW1lU3Bhbi5zdGFydCA+IGIudGltZVNwYW4uc3RhcnQpID8gMSA6IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFja0xpc3QucHVzaCh7IGlkLCBsYWJlbFRleHQsIGRhdGFMaXN0OiBzb3J0ZWRCbG9ja0xpc3QgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgaW52YWxpZCBub2RlLCBpZDogJHtpZH1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdyb3VwIGJsb2NrIGludG8gMmQgYXJyYXkgYnkgdGltZSBzcGFuXG4gICAgY29uc3QgY29tcHV0ZWRNYXAgPSB0cmFja0xpc3QubWFwKHRyYWNrID0+IE9iamVjdC5hc3NpZ24odHJhY2ssIHsgY3Vyc29yOiAwLCBjZWxsTWFwOiBbW11dIH0pKVxuICAgIGNvbnN0IGhhc0RhdGEgPSAodCkgPT4gdC5jdXJzb3IgPCB0LmRhdGFMaXN0Lmxlbmd0aDtcbiAgICAvLyBzb3J0IGJ5IHN0YXJ0IHRpbWUgaW4gY29sdW1uIG9yZGVyIGxpc3RcbiAgICBsZXQgbWluU3RhcnRUaW1lID0gXCI5OTk5LTk5LTk5IDk5Ojk5Ojk5Ljk5OTlcIjtcbiAgICBsZXQgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldCA9IFtdO1xuICAgIGxldCBtYXhCb3R0b21UaW1lID0gLTE7XG4gICAgbGV0IG1heEVuZEluZCA9IC0xO1xuICAgIGNvbnN0IGNyZWF0ZU5ld1JvdyA9IChjbSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBbaSwgdF0gb2YgY20uZW50cmllcygpKSB7XG4gICAgICAgICAgICB0LmNlbGxNYXAucHVzaChbXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHdoaWxlIChjb21wdXRlZE1hcC5zb21lKGhhc0RhdGEpKSB7XG4gICAgICAgIC8vIGZpbmQgdGhlIG1pbiBzdGFydCB0aW1lIG9mIGVsZW1lbnQgZnJvbSBjdXJzb3IgbGlzdFxuICAgICAgICBzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtU2V0ID0gW107XG4gICAgICAgIGxldCBsb2NhbE1pblN0YXJ0VGltZSA9IFwiOTk5OS05OS05OSA5OTo5OTo5OS45OTk5XCI7XG4gICAgICAgIGZvciAobGV0IFtpLCB0XSBvZiBjb21wdXRlZE1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmICh0LmN1cnNvciA+PSB0LmRhdGFMaXN0Lmxlbmd0aCkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB7IHN0YXJ0OiBjdXJTdGFydFRpbWUsIGVuZDogY3VyRW5kVGltZSB9ID0gdC5kYXRhTGlzdFt0LmN1cnNvcl0udGltZVNwYW47XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjdXJTdGFydFRpbWUsIG1pblN0YXJ0VGltZSk7XG4gICAgICAgICAgICBpZiAoY3VyU3RhcnRUaW1lIDwgbG9jYWxNaW5TdGFydFRpbWUpIHtcbiAgICAgICAgICAgICAgICBsb2NhbE1pblN0YXJ0VGltZSA9IGN1clN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICBzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtU2V0ID0gW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyU3RhcnRUaW1lID09IGxvY2FsTWluU3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0VHJhY2tXaGljaEhhc01pblN0YXJ0SXRlbVNldC5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5TdGFydFRpbWUgPiBsb2NhbE1pblN0YXJ0VGltZSkge1xuICAgICAgICAgICAgbWluU3RhcnRUaW1lID0gbG9jYWxNaW5TdGFydFRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGFzU2VhbFJvdyA9IGZhbHNlO1xuICAgICAgICBsZXQgaGFzRmx1c2hlZEFsbCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBzZWxlY3RUcmFja1doaWNoSGFzTWluU3RhcnRJdGVtIG9mIHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW1TZXQpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW0pO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUcmFjayA9IGNvbXB1dGVkTWFwW3NlbGVjdFRyYWNrV2hpY2hIYXNNaW5TdGFydEl0ZW1dO1xuXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZExheWVySW5UcmFjayA9IHNlbGVjdGVkVHJhY2suZGF0YUxpc3Rbc2VsZWN0ZWRUcmFjay5jdXJzb3JdO1xuICAgICAgICAgICAgY29uc3QgeyBjdXJTdGFydFRpbWUsIGN1ckVuZFRpbWUgfSA9IHNlbGVjdGVkTGF5ZXJJblRyYWNrLnRpbWVTcGFuO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2VhbCByb3csIHRoZSBmdXJ0aGVyIGxheWVyIHNob3VsZCBiZSBhZGRlZCBpbiB0aGUgbmV3IHJvd1xuICAgICAgICAgICAgaWYgKCFoYXNTZWFsUm93ICYmXG4gICAgICAgICAgICAgICAgKGN1clN0YXJ0VGltZSA+IG1heEJvdHRvbVRpbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgKHNlbGVjdGVkVHJhY2suY3Vyc29yID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYXllckluVHJhY2suc2VnTmFtZSAhPSBzZWxlY3RlZFRyYWNrLmRhdGFMaXN0W3NlbGVjdGVkVHJhY2suY3Vyc29yIC0gMV0uc2VnTmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlTmV3Um93KGNvbXB1dGVkTWFwKTtcbiAgICAgICAgICAgICAgICBoYXNTZWFsUm93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtaW5TdGFydFRpbWUgPSBjdXJTdGFydFRpbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGVjdGVkVHJhY2suY2VsbE1hcFtzZWxlY3RlZFRyYWNrLmNlbGxNYXAubGVuZ3RoIC0gMV0ucHVzaChzZWxlY3RlZFRyYWNrLmRhdGFMaXN0W3NlbGVjdGVkVHJhY2suY3Vyc29yXSk7XG4gICAgICAgICAgICAvLyBleHBhbmQgYm91bmQgYm90dG9tIGJveCBcbiAgICAgICAgICAgIGlmIChjdXJFbmRUaW1lID4gbWF4Qm90dG9tVGltZSkge1xuICAgICAgICAgICAgICAgIG1heEJvdHRvbVRpbWUgPSBjdXJFbmRUaW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxlY3RlZFRyYWNrLmN1cnNvcisrO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUcmFjay5jdXJzb3IgPT0gc2VsZWN0ZWRUcmFjay5kYXRhTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBtaW4gc3RhcnQgdGltZVxuICAgICAgICAgICAgICAgIGhhc0ZsdXNoZWRBbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB0cmFjayAke3NlbGVjdGVkVHJhY2subGFiZWxUZXh0fSBmbHVzaGVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0ZsdXNoZWRBbGwpIHtcbiAgICAgICAgICAgIGNyZWF0ZU5ld1Jvdyhjb21wdXRlZE1hcCk7XG4gICAgICAgICAgICBtaW5TdGFydFRpbWUgPSBcIjk5OTktOTktOTkgOTk6OTk6OTkuOTk5OVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdEZpZWxkID0gKHQpID0+IHtcbiAgICAgICAgY29uc3QgeyBpZCwgbGFiZWxUZXh0LCBjZWxsTWFwIH0gPSB0O1xuICAgICAgICByZXR1cm4geyBpZCwgbGFiZWxUZXh0LCBjZWxsTWFwIH07XG4gICAgfTtcbiAgICByZXR1cm4gY29tcHV0ZWRNYXAubWFwKHNlbGVjdEZpZWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHN1Ym1pdDogKGRvY3VtZW50VHJlZSkgPT4ge1xuICAgICAgICByZXR1cm4gY29udmVydFRyZWVUb01hcDJEKGRvY3VtZW50VHJlZSk7XG4gICAgfSBcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./service/DiagramService.js\n");

/***/ }),

/***/ "./service/PipelineWorker.js":
/*!***********************************!*\
  !*** ./service/PipelineWorker.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! readline */ \"readline\");\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(readline__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/plugin-compose */ \"./lib/plugin-compose.js\");\n\n\n\n\nclass PipelineWorker {\n  constructor(_nodeTree, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.buildProfile = _buildProfile; // create compose plugin handler chain\n\n    const cachedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.loadCachedMiddleware)();\n    const composedMiddleware = (0,_lib_plugin_compose__WEBPACK_IMPORTED_MODULE_2__.createComposeMiddleware)(cachedMiddleware, [\"acabula-middleware-line-text-formatter\", \"acabula-middleware-syntax-highlight\"]);\n    this.composedPlugin = composedMiddleware;\n  }\n\n  async applyPluginPipeline(resource, checkedPlugin) {\n    // checkedPlugin shoud be a list of object with user option parameters\n    const ordinaryPluginList = checkedPlugin.sort();\n    const dataFrame = await async function (fn) {\n      // const df = new dfd.DataFrame([[\"a\", \"a\", \"a\", \"a\", \"a\"]], { columns: [\"DateTime\", \"Level\", \"ThreadId\", \"ProcessName\", \"Message\"] });\n      const context = {\n        data: null,\n        dataFrame: []\n      };\n      const statistics = {\n        line: 0\n      };\n\n      try {\n        const rl = (0,readline__WEBPACK_IMPORTED_MODULE_1__.createInterface)({\n          input: resource,\n          crlfDelay: Infinity\n        });\n        rl.on('line', line => {\n          // apply middleware for every line, and create \n          context.data = line;\n          statistics.line++;\n          fn(context); // df.append(context.data);\n        });\n        await (0,events__WEBPACK_IMPORTED_MODULE_0__.once)(rl, 'close');\n        console.log(`line process finished, origin line: ${statistics.line}, record log line: ${context.dataFrame.length}`);\n      } catch (err) {\n        console.error(err);\n      }\n\n      return context.dataFrame;\n    }(this.composedPlugin); // bulk process\n\n    const SEGMENT_DELIMITER = \"TMSM main service OnStart\";\n    const shards = [];\n    let section_start_index = 0;\n    let section_end_index = null;\n\n    for (let [index, record] of dataFrame.entries()) {\n      const message = record[4];\n\n      if (message.search(SEGMENT_DELIMITER) > -1) {\n        if (index == 0) {\n          section_start_index = 0;\n          continue;\n        }\n\n        section_end_index = index - 1;\n        shards.push([section_start_index, section_end_index]);\n        section_start_index = index;\n      }\n    }\n\n    section_end_index = dataFrame.length - 1;\n    shards.push([section_start_index, section_end_index]);\n    const result = [];\n\n    const useStatistics = recordList => {\n      // groupby and count\n      const levelStat = recordList.reduce((m, e) => {\n        m[e[1]] = (m[e[1]] || 0) + 1;\n        return m;\n      }, {}); // padding data type.\n\n      return Object.assign({\n        ERROR: 0,\n        INFO: 0,\n        DEBUG: 0,\n        WARN: 0\n      }, levelStat);\n    }; // create thread block\n\n\n    for (let [start, end] of shards) {\n      const thread_map = new Map();\n\n      for (let i = start; i <= end; i++) {\n        const record_tid = dataFrame[i][2];\n\n        if (!thread_map[record_tid]) {\n          thread_map[record_tid] = [];\n        }\n\n        thread_map[record_tid].push(dataFrame[i]);\n      }\n\n      const serverStartBlock = {};\n      serverStartBlock.segmentName = dataFrame[start][0];\n      serverStartBlock.group = [];\n\n      for (let threadId in thread_map) {\n        const threadBlock = {};\n        threadBlock.blockName = threadId;\n        threadBlock.indicators = useStatistics(thread_map[threadId]); // other\n\n        threadBlock.scheduler = false;\n        threadBlock.timeSpan = {\n          start: thread_map[threadId][0][0],\n          end: thread_map[threadId][thread_map[threadId].length - 1][0]\n        };\n        threadBlock.previewContent = thread_map[threadId].slice(0, 5).map(record => record[4]);\n        serverStartBlock.group.push(threadBlock);\n      }\n\n      result.push(serverStartBlock); // clear map because the tid will reused in difference server onstart\n\n      thread_map.clear();\n    }\n\n    return result;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PipelineWorker);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9QaXBlbGluZVdvcmtlci5qcz9lNDAwIl0sIm5hbWVzIjpbIlBpcGVsaW5lV29ya2VyIiwiY29uc3RydWN0b3IiLCJfbm9kZVRyZWUiLCJfYnVpbGRQcm9maWxlIiwibm9kZVRyZWUiLCJidWlsZFByb2ZpbGUiLCJjYWNoZWRNaWRkbGV3YXJlIiwibG9hZENhY2hlZE1pZGRsZXdhcmUiLCJjb21wb3NlZE1pZGRsZXdhcmUiLCJjcmVhdGVDb21wb3NlTWlkZGxld2FyZSIsImNvbXBvc2VkUGx1Z2luIiwiYXBwbHlQbHVnaW5QaXBlbGluZSIsInJlc291cmNlIiwiY2hlY2tlZFBsdWdpbiIsIm9yZGluYXJ5UGx1Z2luTGlzdCIsInNvcnQiLCJkYXRhRnJhbWUiLCJmbiIsImNvbnRleHQiLCJkYXRhIiwic3RhdGlzdGljcyIsImxpbmUiLCJybCIsImNyZWF0ZUludGVyZmFjZSIsImlucHV0IiwiY3JsZkRlbGF5IiwiSW5maW5pdHkiLCJvbiIsIm9uY2UiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiZXJyIiwiZXJyb3IiLCJTRUdNRU5UX0RFTElNSVRFUiIsInNoYXJkcyIsInNlY3Rpb25fc3RhcnRfaW5kZXgiLCJzZWN0aW9uX2VuZF9pbmRleCIsImluZGV4IiwicmVjb3JkIiwiZW50cmllcyIsIm1lc3NhZ2UiLCJzZWFyY2giLCJwdXNoIiwicmVzdWx0IiwidXNlU3RhdGlzdGljcyIsInJlY29yZExpc3QiLCJsZXZlbFN0YXQiLCJyZWR1Y2UiLCJtIiwiZSIsIk9iamVjdCIsImFzc2lnbiIsIkVSUk9SIiwiSU5GTyIsIkRFQlVHIiwiV0FSTiIsInN0YXJ0IiwiZW5kIiwidGhyZWFkX21hcCIsIk1hcCIsImkiLCJyZWNvcmRfdGlkIiwic2VydmVyU3RhcnRCbG9jayIsInNlZ21lbnROYW1lIiwiZ3JvdXAiLCJ0aHJlYWRJZCIsInRocmVhZEJsb2NrIiwiYmxvY2tOYW1lIiwiaW5kaWNhdG9ycyIs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QWU1QyxjQUFmIiwiZmlsZSI6Ii4vc2VydmljZS9QaXBlbGluZVdvcmtlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9uY2UgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgY3JlYXRlSW50ZXJmYWNlIH0gZnJvbSAncmVhZGxpbmUnO1xuaW1wb3J0IHsgbG9hZENhY2hlZE1pZGRsZXdhcmUsIGNyZWF0ZUNvbXBvc2VNaWRkbGV3YXJlLCAgfSBmcm9tICcuLi9saWIvcGx1Z2luLWNvbXBvc2UnO1xuXG5cbmNsYXNzIFBpcGVsaW5lV29ya2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihfbm9kZVRyZWUsIF9idWlsZFByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5ub2RlVHJlZSA9IF9ub2RlVHJlZTtcbiAgICAgICAgdGhpcy5idWlsZFByb2ZpbGUgPSBfYnVpbGRQcm9maWxlO1xuICAgICAgICAvLyBjcmVhdGUgY29tcG9zZSBwbHVnaW4gaGFuZGxlciBjaGFpblxuICAgICAgICBjb25zdCBjYWNoZWRNaWRkbGV3YXJlID0gbG9hZENhY2hlZE1pZGRsZXdhcmUoKTtcbiAgICAgICAgY29uc3QgY29tcG9zZWRNaWRkbGV3YXJlID0gY3JlYXRlQ29tcG9zZU1pZGRsZXdhcmUoXG4gICAgICAgICAgICBjYWNoZWRNaWRkbGV3YXJlLCBcbiAgICAgICAgICAgIFtcImFjYWJ1bGEtbWlkZGxld2FyZS1saW5lLXRleHQtZm9ybWF0dGVyXCIsXG4gICAgICAgICAgICBcImFjYWJ1bGEtbWlkZGxld2FyZS1zeW50YXgtaGlnaGxpZ2h0XCJdKTtcbiAgICAgICAgdGhpcy5jb21wb3NlZFBsdWdpbiA9IGNvbXBvc2VkTWlkZGxld2FyZTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgYXBwbHlQbHVnaW5QaXBlbGluZShyZXNvdXJjZSwgY2hlY2tlZFBsdWdpbikge1xuICAgICAgICAvLyBjaGVja2VkUGx1Z2luIHNob3VkIGJlIGEgbGlzdCBvZiBvYmplY3Qgd2l0aCB1c2VyIG9wdGlvbiBwYXJhbWV0ZXJzXG4gICAgICAgIGNvbnN0IG9yZGluYXJ5UGx1Z2luTGlzdCA9IGNoZWNrZWRQbHVnaW4uc29ydCgpO1xuXG4gICAgICAgIGNvbnN0IGRhdGFGcmFtZSA9IGF3YWl0IChhc3luYyBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgLy8gY29uc3QgZGYgPSBuZXcgZGZkLkRhdGFGcmFtZShbW1wiYVwiLCBcImFcIiwgXCJhXCIsIFwiYVwiLCBcImFcIl1dLCB7IGNvbHVtbnM6IFtcIkRhdGVUaW1lXCIsIFwiTGV2ZWxcIiwgXCJUaHJlYWRJZFwiLCBcIlByb2Nlc3NOYW1lXCIsIFwiTWVzc2FnZVwiXSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogbnVsbCwgXG4gICAgICAgICAgICAgICAgZGF0YUZyYW1lOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRpc3RpY3MgPSB7XG4gICAgICAgICAgICAgICAgbGluZTogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJsID0gY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjcmxmRGVsYXk6IEluZmluaXR5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmwub24oJ2xpbmUnLCAobGluZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBhcHBseSBtaWRkbGV3YXJlIGZvciBldmVyeSBsaW5lLCBhbmQgY3JlYXRlIFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRhdGEgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmxpbmUgKys7XG4gICAgICAgICAgICAgICAgICAgIGZuKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZi5hcHBlbmQoY29udGV4dC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCBvbmNlKHJsLCAnY2xvc2UnKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSBwcm9jZXNzIGZpbmlzaGVkLCBvcmlnaW4gbGluZTogJHtzdGF0aXN0aWNzLmxpbmV9LCByZWNvcmQgbG9nIGxpbmU6ICR7Y29udGV4dC5kYXRhRnJhbWUubGVuZ3RofWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGF0YUZyYW1lO1xuICAgICAgICB9KSh0aGlzLmNvbXBvc2VkUGx1Z2luKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGJ1bGsgcHJvY2Vzc1xuICAgICAgICBjb25zdCBTRUdNRU5UX0RFTElNSVRFUiA9IFwiVE1TTSBtYWluIHNlcnZpY2UgT25TdGFydFwiO1xuICAgICAgICBjb25zdCBzaGFyZHMgPSBbXTtcbiAgICAgICAgbGV0IHNlY3Rpb25fc3RhcnRfaW5kZXggPSAwO1xuICAgICAgICBsZXQgc2VjdGlvbl9lbmRfaW5kZXggPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBbaW5kZXgsIHJlY29yZF0gb2YgZGF0YUZyYW1lLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlY29yZFs0XTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlYXJjaChTRUdNRU5UX0RFTElNSVRFUikgPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25fc3RhcnRfaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VjdGlvbl9lbmRfaW5kZXggPSBpbmRleCAtIDE7XG5cbiAgICAgICAgICAgICAgICBzaGFyZHMucHVzaChbc2VjdGlvbl9zdGFydF9pbmRleCwgc2VjdGlvbl9lbmRfaW5kZXhdKTtcblxuICAgICAgICAgICAgICAgIHNlY3Rpb25fc3RhcnRfaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWN0aW9uX2VuZF9pbmRleCA9IGRhdGFGcmFtZS5sZW5ndGggLSAxO1xuICAgICAgICBzaGFyZHMucHVzaChbc2VjdGlvbl9zdGFydF9pbmRleCwgc2VjdGlvbl9lbmRfaW5kZXhdKTtcblxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCB1c2VTdGF0aXN0aWNzID0gKHJlY29yZExpc3QpID0+IHtcbiAgICAgICAgICAgIC8vIGdyb3VwYnkgYW5kIGNvdW50XG4gICAgICAgICAgICBjb25zdCBsZXZlbFN0YXQgPSByZWNvcmRMaXN0LnJlZHVjZSgobSwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIG1bZVsxXV0gPSAobVtlWzFdXXx8MCkgKyAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgLy8gcGFkZGluZyBkYXRhIHR5cGUuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEVSUk9SOiAwLCBcbiAgICAgICAgICAgICAgICAgICAgSU5GTzogMCwgXG4gICAgICAgICAgICAgICAgICAgIERFQlVHOiAwLCBcbiAgICAgICAgICAgICAgICAgICAgV0FSTjogMCxcbiAgICAgICAgICAgICAgICB9LCBsZXZlbFN0YXQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBjcmVhdGUgdGhyZWFkIGJsb2NrXG4gICAgICAgIGZvciAobGV0IFtzdGFydCwgZW5kXSBvZiBzaGFyZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRocmVhZF9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRfdGlkID0gZGF0YUZyYW1lW2ldWzJdO1xuICAgICAgICAgICAgICAgIGlmICghIHRocmVhZF9tYXBbcmVjb3JkX3RpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyZWFkX21hcFtyZWNvcmRfdGlkXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJlYWRfbWFwW3JlY29yZF90aWRdLnB1c2goZGF0YUZyYW1lW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlcnZlclN0YXJ0QmxvY2sgPSB7fTtcbiAgICAgICAgICAgIHNlcnZlclN0YXJ0QmxvY2suc2VnbWVudE5hbWUgPSBkYXRhRnJhbWVbc3RhcnRdWzBdO1xuICAgICAgICAgICAgc2VydmVyU3RhcnRCbG9jay5ncm91cCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdGhyZWFkSWQgaW4gdGhyZWFkX21hcCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRocmVhZEJsb2NrID0ge307XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suYmxvY2tOYW1lID0gdGhyZWFkSWQ7XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suaW5kaWNhdG9ycyA9IHVzZVN0YXRpc3RpY3ModGhyZWFkX21hcFt0aHJlYWRJZF0pO1xuICAgICAgICAgICAgICAgIC8vIG90aGVyXG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2suc2NoZWR1bGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2sudGltZVNwYW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aHJlYWRfbWFwW3RocmVhZElkXVswXVswXSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB0aHJlYWRfbWFwW3RocmVhZElkXVsgdGhyZWFkX21hcFt0aHJlYWRJZF0ubGVuZ3RoIC0gMSBdWzBdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhyZWFkQmxvY2sucHJldmlld0NvbnRlbnQgPSB0aHJlYWRfbWFwW3RocmVhZElkXS5zbGljZSgwLCA1KS5tYXAocmVjb3JkID0+IHJlY29yZFs0XSk7XG4gICAgICAgICAgICAgICAgc2VydmVyU3RhcnRCbG9jay5ncm91cC5wdXNoKHRocmVhZEJsb2NrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlclN0YXJ0QmxvY2spO1xuICAgICAgICAgICAgLy8gY2xlYXIgbWFwIGJlY2F1c2UgdGhlIHRpZCB3aWxsIHJldXNlZCBpbiBkaWZmZXJlbmNlIHNlcnZlciBvbnN0YXJ0XG4gICAgICAgICAgICB0aHJlYWRfbWFwLmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGlwZWxpbmVXb3JrZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./service/PipelineWorker.js\n");

/***/ }),

/***/ "./service/TaskRunner.js":
/*!*******************************!*\
  !*** ./service/TaskRunner.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PipelineWorker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PipelineWorker */ \"./service/PipelineWorker.js\");\n/* harmony import */ var _ResourceManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ResourceManager */ \"./service/ResourceManager.js\");\n/* harmony import */ var _DiagramService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DiagramService */ \"./service/DiagramService.js\");\n/* harmony import */ var _IndexService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IndexService */ \"./service/IndexService.js\");\n\n\n\n\n\nclass TaskRunner {\n  constructor(_nodeTree, _keywords, _buildProfile) {\n    this.nodeTree = _nodeTree;\n    this.keywords = _keywords;\n    this.buildProfile = _buildProfile;\n    this.pipelineWorker = new _PipelineWorker__WEBPACK_IMPORTED_MODULE_0__.default(_nodeTree, _buildProfile);\n    this.resourceManager = new _ResourceManager__WEBPACK_IMPORTED_MODULE_1__.default(_nodeTree, _buildProfile);\n  }\n\n  async createResourceFlow(nodeInfo) {\n    const {\n      id,\n      labelText,\n      resourceName,\n      nodeType,\n      nodeDetailType,\n      checkedPlugin,\n      children\n    } = nodeInfo; // check if this is a mix node\n\n    if (children && children.length > 0) {\n      // concat every node info\n      const subGroup = [];\n\n      for (let subNode of children) {\n        subGroup.push(await this.createResourceFlow(subNode));\n      }\n\n      return {\n        id,\n        labelText,\n        subGroup\n      };\n    } // this is a data node\n\n\n    let result = {};\n\n    if (resourceName) {\n      // read resource\n      const resource = await this.resourceManager.getReadStream(resourceName); // apply plugin according to user selected\n\n      const applyedPluginResource = await this.pipelineWorker.applyPluginPipeline(resource, checkedPlugin);\n      result = {\n        fragments: applyedPluginResource,\n        id,\n        labelText\n      };\n    } else {\n      result = {\n        id,\n        labelText\n      };\n    }\n\n    return result;\n  }\n\n  async run() {\n    const documentTree = await this.createResourceFlow(this.nodeTree);\n    const diagram = _DiagramService__WEBPACK_IMPORTED_MODULE_2__.default.submit(documentTree); // indexing the resource using keyword setting\n    // const indexingResult = IndexService.submit(this.nodeTree, this.keywords);\n\n    return {\n      type: \"documentDiagram\",\n      diagram\n    };\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TaskRunner);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi1zdGFydGVyLy4vc2VydmljZS9UYXNrUnVubmVyLmpzPzg3YjAiXSwibmFtZXMiOlsiVGFza1J1bm5lciIsImNvbnN0cnVjdG9yIiwiX25vZGVUcmVlIiwiX2tleXdvcmRzIiwiX2J1aWxkUHJvZmlsZSIsIm5vZGVUcmVlIiwia2V5d29yZHMiLCJidWlsZFByb2ZpbGUiLCJwaXBlbGluZVdvcmtlciIsIlBpcGVsaW5lV29ya2VyIiwicmVzb3VyY2VNYW5hZ2VyIiwiUmVzb3VyY2VNYW5hZ2VyIiwiY3JlYXRlUmVzb3VyY2VGbG93Iiwibm9kZUluZm8iLCJpZCIsImxhYmVsVGV4dCIsInJlc291cmNlTmFtZSIsIm5vZGVUeXBlIiwibm9kZURldGFpbFR5cGUiLCJjaGVja2VkUGx1Z2luIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJzdWJHcm91cCIsInN1Yk5vZGUiLCJwdXNoIiwicmVzdWx0IiwicmVzb3VyY2UiLCJnZXRSZWFkU3RyZWFtIiwiYXBwbHllZFBsdWdpblJlc291cmNlIiwiYXBwbHlQbHVnaW5QaXBlbGluZSIsImZyYWdtZW50cyIsInJ1biIsImRvY3VtZW50VHJlZSIsImRpYWdyYW0iLCJEaWFncmFtU2VydmljZSIsInR5cGUiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsVUFBTixDQUFpQjtBQUNiQyxhQUFXLENBQUNDLFNBQUQsRUFBWUMsU0FBWixFQUF1QkMsYUFBdkIsRUFBc0M7QUFDN0MsU0FBS0MsUUFBTCxHQUFnQkgsU0FBaEI7QUFDQSxTQUFLSSxRQUFMLEdBQWdCSCxTQUFoQjtBQUNBLFNBQUtJLFlBQUwsR0FBb0JILGFBQXBCO0FBQ0EsU0FBS0ksY0FBTCxHQUFzQixJQUFJQyxvREFBSixDQUFtQlAsU0FBbkIsRUFBOEJFLGFBQTlCLENBQXRCO0FBQ0EsU0FBS00sZUFBTCxHQUF1QixJQUFJQyxxREFBSixDQUFvQlQsU0FBcEIsRUFBK0JFLGFBQS9CLENBQXZCO0FBQ0g7O0FBRUQsUUFBTVEsa0JBQU4sQ0FBeUJDLFFBQXpCLEVBQW1DO0FBQy9CLFVBQU07QUFBRUMsUUFBRjtBQUFNQyxlQUFOO0FBQWlCQyxrQkFBakI7QUFBK0JDLGNBQS9CO0FBQXlDQyxvQkFBekM7QUFBeURDLG1CQUF6RDtBQUF3RUM7QUFBeEUsUUFBcUZQLFFBQTNGLENBRCtCLENBRS9COztBQUNBLFFBQUlPLFFBQVEsSUFBSUEsUUFBUSxDQUFDQyxNQUFULEdBQWtCLENBQWxDLEVBQXFDO0FBQ2pDO0FBQ0EsWUFBTUMsUUFBUSxHQUFHLEVBQWpCOztBQUNBLFdBQUssSUFBSUMsT0FBVCxJQUFvQkgsUUFBcEIsRUFBOEI7QUFDMUJFLGdCQUFRLENBQUNFLElBQVQsQ0FBYyxNQUFNLEtBQUtaLGtCQUFMLENBQXdCVyxPQUF4QixDQUFwQjtBQUNIOztBQUNELGFBQU87QUFBRVQsVUFBRjtBQUFNQyxpQkFBTjtBQUFpQk87QUFBakIsT0FBUDtBQUNILEtBVjhCLENBVy9COzs7QUFDQSxRQUFJRyxNQUFNLEdBQUcsRUFBYjs7QUFDQSxRQUFJVCxZQUFKLEVBQWtCO0FBQ2Q7QUFDQSxZQUFNVSxRQUFRLEdBQUcsTUFBTSxLQUFLaEIsZUFBTCxDQUFxQmlCLGFBQXJCLENBQW1DWCxZQUFuQyxDQUF2QixDQUZjLENBSWQ7O0FBQ0EsWUFBTVkscUJBQXFCLEdBQUcsTUFBTSxLQUFLcEIsY0FBTCxDQUFvQnFCLG1CQUFwQixDQUF3Q0gsUUFBeEMsRUFBa0RQLGFBQWxELENBQXBDO0FBRUFNLFlBQU0sR0FBRztBQUFFSyxpQkFBUyxFQUFFRixxQkFBYjtBQUFvQ2QsVUFBcEM7QUFBd0NDO0FBQXhDLE9BQVQ7QUFDSCxLQVJELE1BUU87QUFDSFUsWUFBTSxHQUFHO0FBQUVYLFVBQUY7QUFBTUM7QUFBTixPQUFUO0FBQ0g7O0FBQ0QsV0FBT1UsTUFBUDtBQUNIOztBQUVELFFBQU1NLEdBQU4sR0FBWTtBQUNSLFVBQU1DLFlBQVksR0FBRyxNQUFNLEtBQUtwQixrQkFBTCxDQUF3QixLQUFLUCxRQUE3QixDQUEzQjtBQUNBLFVBQU00QixPQUFPLEdBQUdDLDJEQUFBLENBQXNCRixZQUF0QixDQUFoQixDQUZRLENBR1I7QUFDQTs7QUFDQSxXQUFPO0FBQUVHLFVBQUksRUFBRSxpQkFBUjtBQUEyQkY7QUFBM0IsS0FBUDtBQUNIOztBQTFDWTs7QUE2Q2pCLCtEQUFlakMsVUFBZiIsImZpbGUiOiIuL3NlcnZpY2UvVGFza1J1bm5lci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaXBlbGluZVdvcmtlciBmcm9tICcuL1BpcGVsaW5lV29ya2VyJztcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSAnLi9SZXNvdXJjZU1hbmFnZXInO1xuaW1wb3J0IERpYWdyYW1TZXJ2aWNlIGZyb20gJy4vRGlhZ3JhbVNlcnZpY2UnO1xuaW1wb3J0IEluZGV4U2VydmljZSBmcm9tICcuL0luZGV4U2VydmljZSc7XG5cbmNsYXNzIFRhc2tSdW5uZXIge1xuICAgIGNvbnN0cnVjdG9yKF9ub2RlVHJlZSwgX2tleXdvcmRzLCBfYnVpbGRQcm9maWxlKSB7XG4gICAgICAgIHRoaXMubm9kZVRyZWUgPSBfbm9kZVRyZWU7XG4gICAgICAgIHRoaXMua2V5d29yZHMgPSBfa2V5d29yZHM7XG4gICAgICAgIHRoaXMuYnVpbGRQcm9maWxlID0gX2J1aWxkUHJvZmlsZTtcbiAgICAgICAgdGhpcy5waXBlbGluZVdvcmtlciA9IG5ldyBQaXBlbGluZVdvcmtlcihfbm9kZVRyZWUsIF9idWlsZFByb2ZpbGUpO1xuICAgICAgICB0aGlzLnJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoX25vZGVUcmVlLCBfYnVpbGRQcm9maWxlKTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVSZXNvdXJjZUZsb3cobm9kZUluZm8pIHtcbiAgICAgICAgY29uc3QgeyBpZCwgbGFiZWxUZXh0LCByZXNvdXJjZU5hbWUsIG5vZGVUeXBlLCBub2RlRGV0YWlsVHlwZSwgY2hlY2tlZFBsdWdpbiwgY2hpbGRyZW4gfSA9IG5vZGVJbmZvO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbWl4IG5vZGVcbiAgICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGNvbmNhdCBldmVyeSBub2RlIGluZm9cbiAgICAgICAgICAgIGNvbnN0IHN1Ykdyb3VwID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzdWJOb2RlIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgc3ViR3JvdXAucHVzaChhd2FpdCB0aGlzLmNyZWF0ZVJlc291cmNlRmxvdyhzdWJOb2RlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBpZCwgbGFiZWxUZXh0LCBzdWJHcm91cCB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgaXMgYSBkYXRhIG5vZGVcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgICAgICBpZiAocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgICAgICAvLyByZWFkIHJlc291cmNlXG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZSA9IGF3YWl0IHRoaXMucmVzb3VyY2VNYW5hZ2VyLmdldFJlYWRTdHJlYW0ocmVzb3VyY2VOYW1lKTtcblxuICAgICAgICAgICAgLy8gYXBwbHkgcGx1Z2luIGFjY29yZGluZyB0byB1c2VyIHNlbGVjdGVkXG4gICAgICAgICAgICBjb25zdCBhcHBseWVkUGx1Z2luUmVzb3VyY2UgPSBhd2FpdCB0aGlzLnBpcGVsaW5lV29ya2VyLmFwcGx5UGx1Z2luUGlwZWxpbmUocmVzb3VyY2UsIGNoZWNrZWRQbHVnaW4pO1xuXG4gICAgICAgICAgICByZXN1bHQgPSB7IGZyYWdtZW50czogYXBwbHllZFBsdWdpblJlc291cmNlLCBpZCwgbGFiZWxUZXh0IH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7IGlkLCBsYWJlbFRleHQgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGFzeW5jIHJ1bigpIHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRUcmVlID0gYXdhaXQgdGhpcy5jcmVhdGVSZXNvdXJjZUZsb3codGhpcy5ub2RlVHJlZSk7XG4gICAgICAgIGNvbnN0IGRpYWdyYW0gPSBEaWFncmFtU2VydmljZS5zdWJtaXQoZG9jdW1lbnRUcmVlKTtcbiAgICAgICAgLy8gaW5kZXhpbmcgdGhlIHJlc291cmNlIHVzaW5nIGtleXdvcmQgc2V0dGluZ1xuICAgICAgICAvLyBjb25zdCBpbmRleGluZ1Jlc3VsdCA9IEluZGV4U2VydmljZS5zdWJtaXQodGhpcy5ub2RlVHJlZSwgdGhpcy5rZXl3b3Jkcyk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZG9jdW1lbnREaWFncmFtXCIsIGRpYWdyYW0gfTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tSdW5uZXI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./service/TaskRunner.js\n");

/***/ }),

/***/ "@elastic/elasticsearch":
/*!*****************************************!*\
  !*** external "@elastic/elasticsearch" ***!
  \*****************************************/
/***/ (function(module) {

"use strict";
module.exports = require("@elastic/elasticsearch");;

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("cors");;

/***/ }),

/***/ "es6-promise":
/*!******************************!*\
  !*** external "es6-promise" ***!
  \******************************/
/***/ (function(module) {

"use strict";
module.exports = require("es6-promise");;

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ (function(module) {

"use strict";
module.exports = require("events");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ (function(module) {

"use strict";
module.exports = require("fs");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ (function(module) {

"use strict";
module.exports = require("path");;

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ (function(module) {

"use strict";
module.exports = require("readline");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = __webpack_require__.X(0, ["lib_init_middleware_js-service_IndexService_js"], function() { return __webpack_exec__("./pages/api/task/submit.js"); });
module.exports = __webpack_exports__;

})();